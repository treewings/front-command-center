{"ast":null,"code":"import _objectSpread from\"/command-center/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/command-center/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/command-center/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/command-center/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{Helmet}from\"react-helmet\";import{Loading,Error}from\"../../helper\";import{TascomFooter,AsideInformations,SimpleCard,UnitBedsCard,Select}from\"../../components\";import{ReactComponent as Clock}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/Clock.svg\";import{ReactComponent as Paper}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/Paper.svg\";import{ReactComponent as Skeleton}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/Skeleton.svg\";import{ReactComponent as Lab}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/Lab.svg\";import useHDUIUTI from\"../../service/useHDUIUTI\";import useGeneralPercent from\"../../service/useGeneralPercent\";import{useScroll}from\"../../service/useScroll\";import useUtilities from\"../../service/useUtilities\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HDUIUTIGeneral=function HDUIUTIGeneral(){var timeInterval=5000;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];var _React$useState5=React.useState(\"-\"),_React$useState6=_slicedToArray(_React$useState5,2),filter=_React$useState6[0],setFilter=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),unitOptions=_React$useState8[0],setUnitOptions=_React$useState8[1];var _React$useState9=React.useState(true),_React$useState10=_slicedToArray(_React$useState9,2),fetch=_React$useState10[0],setFetch=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),fetchEnd=_React$useState12[0],setFetchEnd=_React$useState12[1];var divBeds=React.useRef(null);var _React$useMemo=React.useMemo(useUtilities,[]),getPageDimensions=_React$useMemo.getPageDimensions;useScroll(divBeds,12,15000,function(){return setFetchEnd(true);});//General Percent\nvar _useGeneralPercent=useGeneralPercent(),getTotalUnit=_useGeneralPercent.getTotalUnit;var refGetTotalUnit=React.useRef(getTotalUnit);var _React$useState13=React.useState(),_React$useState14=_slicedToArray(_React$useState13,2),totalUnitData=_React$useState14[0],setTotalUnitData=_React$useState14[1];React.useEffect(function(){setLoading(true);function executeRequest(){return _executeRequest.apply(this,arguments);}function _executeRequest(){_executeRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$refGetTotalUni,totalUnit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return refGetTotalUnit.current();case 3:_yield$refGetTotalUni=_context.sent;totalUnit=_yield$refGetTotalUni.totalUnit;setTotalUnitData(totalUnit);setError(false);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,9,12,15]]);}));return _executeRequest.apply(this,arguments);}executeRequest();var interval=setInterval(function(){executeRequest();},timeInterval);return function(){clearInterval(interval);};},[]);//unities\nvar _useHDUIUTI=useHDUIUTI(),getUnities=_useHDUIUTI.getUnities,getBeds=_useHDUIUTI.getBeds;var refGetUnities=React.useRef(getUnities);var _React$useState15=React.useState(),_React$useState16=_slicedToArray(_React$useState15,2),unities=_React$useState16[0],setUnities=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),pages=_React$useState18[0],setPages=_React$useState18[1];var _React$useState19=React.useState([]),_React$useState20=_slicedToArray(_React$useState19,2),totalPages=_React$useState20[0],setTotalPages=_React$useState20[1];React.useLayoutEffect(function(){setLoading(true);function executeRequest(){return _executeRequest2.apply(this,arguments);}function _executeRequest2(){_executeRequest2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$refGetUnities$,_unit;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return refGetUnities.current();case 3:_yield$refGetUnities$=_context2.sent;_unit=_yield$refGetUnities$.unit;setUnities(filter===\"-\"?_unit:_unit.filter(function(_ref){var DS_UNID_INT=_ref.DS_UNID_INT;return DS_UNID_INT===filter;}));setError(false);setUnitOptions(_unit.map(function(loopUnit){return loopUnit.DS_UNID_INT;}));setPages(function(){var pages=[];if(filter===\"-\"){_unit.forEach(function(){pages.push(1);});}else{pages.push(1);}return pages;});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);setError(_context2.t0.message);case 14:_context2.prev=14;setLoading(false);setFetch(false);return _context2.finish(14);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11,14,18]]);}));return _executeRequest2.apply(this,arguments);}if(!pages.length&&!totalPages.length||fetch){executeRequest();}if(fetchEnd){var incrementedPages=pages.map(function(page,index){if(page>totalPages[index]){return 1;}else{return++page;}});setPages(incrementedPages);setFetchEnd(false);}},[pages,totalPages,filter,fetch,fetchEnd]);//Unit Beds\nvar refGetUnitBeds=React.useRef(getBeds);var _React$useState21=React.useState([]),_React$useState22=_slicedToArray(_React$useState21,2),unit=_React$useState22[0],setUnit=_React$useState22[1];React.useLayoutEffect(function(){function executeRequest(){return _executeRequest3.apply(this,arguments);}function _executeRequest3(){_executeRequest3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var loopPages,loopBeds,limitItens;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:loopPages=totalPages;loopBeds=unit;limitItens=getPageDimensions().width<=900?3:9;limitItens=unities.length!==1?limitItens:30;try{unities===null||unities===void 0?void 0:unities.forEach(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(loopUnit,index){var _yield$refGetUnitBeds,unitBeds,totPages;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return refGetUnitBeds.current(loopUnit.DS_UNID_INT,pages[index],limitItens);case 2:_yield$refGetUnitBeds=_context3.sent;unitBeds=_yield$refGetUnitBeds.unitBeds;totPages=_yield$refGetUnitBeds.totPages;setError(false);if(pages[index]<=totPages){unit[index]=unitBeds;loopPages[index]=totPages;}case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());setUnit(loopBeds);setTotalPages(loopPages);}catch(error){setError(error.message);}finally{setLoading(false);}case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _executeRequest3.apply(this,arguments);}if(pages.length){executeRequest();}},[pages,unities,totalPages,unit,getPageDimensions]);//config cards\nvar titles=[{color:\"#FFFFFF\",title:\"Vago\"},{color:\"#D62F2F\",title:\"Ocupado\"},{color:\"#D09600\",title:\"Alta Hospitalar\"},{color:\"#109683\",title:\"Reservado\"},{color:\"#7C7C7C\",title:\"Alta médica\"},{color:\"#165590\",title:\"Higienização\"},{color:\"#65A42B\",title:\"Manutenção\"},{color:\"#74603B\",title:\"Interd. Temp.\"},{icon:/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4\",fill:\"#65A42B\"}),title:\"Manutenção | Higienização\"},{icon:/*#__PURE__*/_jsx(Paper,{className:\"w-4 h-4\",fill:\"#CC78FF\"}),title:\"Presc. dia\"},{icon:/*#__PURE__*/_jsx(Paper,{className:\"w-4 h-4\",fill:\"#65A42B\"}),title:\"Presc. nova\"},{icon:/*#__PURE__*/_jsx(Skeleton,{className:\"w-4 h-4\",fill:\"#FFF\"}),title:\"Imagem\"},{icon:/*#__PURE__*/_jsx(Lab,{className:\"w-4 h-4\",fill:\"#FFF\"}),title:\"Laboratório\"},{icon:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Skeleton,{className:\"w-4 h-4\",fill:\"#D62F2F\"}),/*#__PURE__*/_jsx(Lab,{className:\"w-4 h-4\",fill:\"#D62F2F\"})]}),title:\"Solicitado\"},{icon:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Skeleton,{className:\"w-4 h-4\",fill:\"#65A42B\"}),/*#__PURE__*/_jsx(Lab,{className:\"w-4 h-4\",fill:\"#65A42B\"})]}),title:\"Liberado\"}];var configUnities=!unities&&!unit.length?[]:unities.map(function(loopUnit,i){return _objectSpread(_objectSpread({},loopUnit),{},{beds:unit[i]});});var unitiesCards=unities&&configUnities.map(function(unitie){var iconSize=filter!==\"-\"?\"w-5 h-5\":\"w-3 h-3\";var cardSize=filter!==\"-\"?\"w-42 h-16 tex-lg\":\"w-28 h-12 text-xs\";return/*#__PURE__*/_jsx(UnitBedsCard,{title:unitie.DS_UNID_INT,data:unitie.beds,dataKey:\"DS_RESUMO\",bedVariant:\"outlined\",className:unities.length!==1?\"h-20 items-center\":\"\",bedClass:\"rounded-md \".concat(cardSize),containerClass:unities.length!==1?\"\":\"flex-wrap\",filterIcons:function filterIcons(bed){var icons=[];var seconds=10*1000;if(!!bed.TEMPO_MANUTENCAO){icons.push(/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 items-center\",children:[/*#__PURE__*/_jsx(Paper,{className:iconSize,fill:\"#65A42B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-green-700\",children:bed.TEMPO_MANUTENCAO})]}));}else{if(bed.STATUS_PRESCRICAO===\"PRIMEIRA PRESCRICAO\"){icons.push(/*#__PURE__*/_jsx(Paper,{id:bed.DS_RESUMO+\" - paper1\",className:\"\".concat(iconSize,\" \").concat(bed.STATUS_COR===\"ROXO\"?\"\":\"animate-pulse-plus\"),fill:bed.STATUS_COR===\"ROXO\"?\"#CC78FF\":\"#FFF\"}));setTimeout(function(){var element=document.getElementById(bed.DS_RESUMO+\" - paper1\");if(!!element){element.classList.remove(\"animate-pulse-plus\");element.style.fill=\"#CC78FF\";}},seconds);}if(bed.STATUS_PRESCRICAO_2===\"OUTRAS\"){icons.push(/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Paper,{id:bed.DS_RESUMO+\" - paper2\",className:\"\".concat(iconSize,\" \").concat(bed.STATUS_COR_2===\"VERDE\"?\"\":\"animate-pulse-plus\"),fill:bed.STATUS_COR_2===\"VERDE\"?\"#65A42B\":\"#FFF\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:bed.QTD_PEND_PRESC})]}));setTimeout(function(){var element=document.getElementById(bed.DS_RESUMO+\" - paper2\");if(!!element){element.classList.remove(\"animate-pulse-plus\");element.style.fill=\"#65A42B\";}},seconds);}if(bed.QTD_PEND_LAB&&!!bed.LABORATORIO_STATUS&&bed.LABORATORIO_STATUS!==\"NAO TEM\"){icons.push(/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Lab,{id:bed.DS_RESUMO+\" - lab\",className:\"\".concat(iconSize,\" \").concat(bed.LABORATORIO_STATUS===\"PENDENTE\"?\"\":\"animate-pulse-plus\"),fill:bed.LABORATORIO_STATUS===\"PENDENTE\"?\"#D62F2F\":\"#65A42B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:bed.QTD_PEND_LAB})]}));setTimeout(function(){var element=document.getElementById(bed.DS_RESUMO+\" - lab\");if(!!element){element.classList.remove(\"animate-pulse-plus\");}},seconds);}if(!!bed.IMAGEM_STATUS&&bed.IMAGEM_STATUS!==\"NAO TEM\"){icons.push(/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Skeleton,{id:bed.DS_RESUMO+\" - skeleton\",className:\"\".concat(iconSize,\" \").concat(bed.IMAGEM_STATUS===\"PENDENTE\"?\"\":\"animate-pulse-plus\"),fill:bed.IMAGEM_STATUS===\"PENDENTE\"?\"#D62F2F\":\"#65A42B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:bed.QTD_PEND_IMAG})]}));setTimeout(function(){var element=document.getElementById(bed.DS_RESUMO+\" - skeleton\");if(!!element){element.classList.remove(\"animate-pulse-plus\");}},seconds);}}return icons;}},unitie.DS_UNID_INT);});if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"main\",{className:\"min-h-screen w-full flex flex-col justify-center\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"CMDC | HD - UI - UTI | Geral\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Dashboard principal de HD | UI | UTI.\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"flex-1 flex flex-col justify-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-2 mt-3 w-full max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(SimpleCard,{data:(unities===null||unities===void 0?void 0:unities.length)!==1?totalUnitData===null||totalUnitData===void 0?void 0:totalUnitData.TOH_ON_LINE:unities[0].PERCENTAGEM_OCUPACAO,type:\"string\",title:\"% Ocupa\\xE7\\xE3o\",className:\"w-32 h-15 bg-opacity-50 text-red-500 text-xslg font-semibold\",dataClass:\"text-3xl\",toolTipConfig:{title:\"% Ocupação\",desc:\"Este card mostra  o percentual de ocupação de leitos, não considerando os leitos extras, HD's e Unidade Jardins. Código das unidades que não são consideradas (5,22,19,1,21,41). Fórmula do cálculo : leitos ocupados / (leitos extras ocupados + leitos operacionais) * 100\"}}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl text-white text-center font-bold\",children:\"HD | UI | UTI\"}),/*#__PURE__*/_jsx(Select,{value:filter,setValue:function setValue(value){setFilter(value);setFetch(true);},defaultValue:\"GERAL\",options:unitOptions,className:\"text-xs h-7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-5\",children:/*#__PURE__*/_jsx(\"div\",{ref:divBeds,className:\"flex flex-col gap-3 max-w-7xl mx-auto mt-3 h-screen max-h-none sm:max-h-113 py-1 overflow-y-scroll scroll-hide\",children:unitiesCards})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative sm:block flex flex-col\",children:[/*#__PURE__*/_jsx(AsideInformations,{data:titles,variant:\"outlined\",labelClass:\"flex-wrap sm:justify-around flex-row\",className:\"relative z-10 max-w-4xl m-auto text-xs\"}),/*#__PURE__*/_jsx(TascomFooter,{className:\"sm:absolute relative bottom-0 left-0\"})]}),error&&/*#__PURE__*/_jsx(Error,{message:error})]});};export default HDUIUTIGeneral;","map":{"version":3,"sources":["/command-center/src/pages/HDUIUTIGeneral/HDUIUTIGeneral.jsx"],"names":["React","Helmet","Loading","Error","TascomFooter","AsideInformations","SimpleCard","UnitBedsCard","Select","useHDUIUTI","useGeneralPercent","useScroll","useUtilities","HDUIUTIGeneral","timeInterval","useState","loading","setLoading","error","setError","filter","setFilter","unitOptions","setUnitOptions","fetch","setFetch","fetchEnd","setFetchEnd","divBeds","useRef","useMemo","getPageDimensions","getTotalUnit","refGetTotalUnit","totalUnitData","setTotalUnitData","useEffect","executeRequest","current","totalUnit","message","interval","setInterval","clearInterval","getUnities","getBeds","refGetUnities","unities","setUnities","pages","setPages","totalPages","setTotalPages","useLayoutEffect","unit","DS_UNID_INT","map","loopUnit","forEach","push","length","incrementedPages","page","index","refGetUnitBeds","setUnit","loopPages","loopBeds","limitItens","width","unitBeds","totPages","titles","color","title","icon","configUnities","i","beds","unitiesCards","unitie","iconSize","cardSize","bed","icons","seconds","TEMPO_MANUTENCAO","STATUS_PRESCRICAO","DS_RESUMO","STATUS_COR","setTimeout","element","document","getElementById","classList","remove","style","fill","STATUS_PRESCRICAO_2","STATUS_COR_2","QTD_PEND_PRESC","QTD_PEND_LAB","LABORATORIO_STATUS","IMAGEM_STATUS","QTD_PEND_IMAG","TOH_ON_LINE","PERCENTAGEM_OCUPACAO","desc","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Loading, Error } from \"../../helper\";\r\nimport {\r\n  TascomFooter,\r\n  AsideInformations,\r\n  SimpleCard,\r\n  UnitBedsCard,\r\n  Select,\r\n} from \"../../components\";\r\nimport { ReactComponent as Clock } from \"../../assets/svg/Clock.svg\";\r\nimport { ReactComponent as Paper } from \"../../assets/svg/Paper.svg\";\r\nimport { ReactComponent as Skeleton } from \"../../assets/svg/Skeleton.svg\";\r\nimport { ReactComponent as Lab } from \"../../assets/svg/Lab.svg\";\r\nimport useHDUIUTI from \"../../service/useHDUIUTI\";\r\nimport useGeneralPercent from \"../../service/useGeneralPercent\";\r\nimport { useScroll } from \"../../service/useScroll\";\r\nimport useUtilities from \"../../service/useUtilities\";\r\n\r\nconst HDUIUTIGeneral = () => {\r\n  const timeInterval = 5000;\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const [filter, setFilter] = React.useState(\"-\");\r\n  const [unitOptions, setUnitOptions] = React.useState([]);\r\n  const [fetch, setFetch] = React.useState(true);\r\n  const [fetchEnd, setFetchEnd] = React.useState(false);\r\n  const divBeds = React.useRef(null);\r\n  const { getPageDimensions } = React.useMemo(useUtilities, []);\r\n\r\n  useScroll(divBeds, 12, 15000, () => setFetchEnd(true));\r\n\r\n  //General Percent\r\n  const { getTotalUnit } = useGeneralPercent();\r\n  const refGetTotalUnit = React.useRef(getTotalUnit);\r\n  const [totalUnitData, setTotalUnitData] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    setLoading(true);\r\n    async function executeRequest() {\r\n      try {\r\n        const { totalUnit } = await refGetTotalUnit.current();\r\n        setTotalUnitData(totalUnit);\r\n        setError(false);\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    executeRequest();\r\n    const interval = setInterval(() => {\r\n      executeRequest();\r\n    }, timeInterval);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  //unities\r\n  const { getUnities, getBeds } = useHDUIUTI();\r\n  const refGetUnities = React.useRef(getUnities);\r\n  const [unities, setUnities] = React.useState();\r\n  const [pages, setPages] = React.useState([]);\r\n  const [totalPages, setTotalPages] = React.useState([]);\r\n\r\n  React.useLayoutEffect(() => {\r\n    setLoading(true);\r\n    async function executeRequest() {\r\n      try {\r\n        const { unit } = await refGetUnities.current();\r\n        setUnities(\r\n          filter === \"-\"\r\n            ? unit\r\n            : unit.filter(({ DS_UNID_INT }) => DS_UNID_INT === filter)\r\n        );\r\n        setError(false);\r\n        setUnitOptions(unit.map((loopUnit) => loopUnit.DS_UNID_INT));\r\n        setPages(() => {\r\n          const pages = [];\r\n          if (filter === \"-\") {\r\n            unit.forEach(() => {\r\n              pages.push(1);\r\n            });\r\n          } else {\r\n            pages.push(1);\r\n          }\r\n          return pages;\r\n        });\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n        setFetch(false);\r\n      }\r\n    }\r\n    if ((!pages.length && !totalPages.length) || fetch) {\r\n      executeRequest();\r\n    }\r\n\r\n    if (fetchEnd) {\r\n      const incrementedPages = pages.map((page, index) => {\r\n        if (page > totalPages[index]) {\r\n          return 1;\r\n        } else {\r\n          return ++page;\r\n        }\r\n      });\r\n      setPages(incrementedPages);\r\n      setFetchEnd(false);\r\n    }\r\n  }, [pages, totalPages, filter, fetch, fetchEnd]);\r\n\r\n  //Unit Beds\r\n  const refGetUnitBeds = React.useRef(getBeds);\r\n  const [unit, setUnit] = React.useState([]);\r\n\r\n  React.useLayoutEffect(() => {\r\n    async function executeRequest() {\r\n      const loopPages = totalPages;\r\n      const loopBeds = unit;\r\n      let limitItens = getPageDimensions().width <= 900 ? 3 : 9;\r\n      limitItens = unities.length !== 1 ? limitItens : 30;\r\n      try {\r\n        unities?.forEach(async (loopUnit, index) => {\r\n          const { unitBeds, totPages } = await refGetUnitBeds.current(\r\n            loopUnit.DS_UNID_INT,\r\n            pages[index],\r\n            limitItens\r\n          );\r\n          setError(false);\r\n\r\n          if (pages[index] <= totPages) {\r\n            unit[index] = unitBeds;\r\n            loopPages[index] = totPages;\r\n          }\r\n        });\r\n        setUnit(loopBeds);\r\n        setTotalPages(loopPages);\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    if (pages.length) {\r\n      executeRequest();\r\n    }\r\n  }, [pages, unities, totalPages, unit, getPageDimensions]);\r\n\r\n  //config cards\r\n  const titles = [\r\n    { color: \"#FFFFFF\", title: \"Vago\" },\r\n    { color: \"#D62F2F\", title: \"Ocupado\" },\r\n    { color: \"#D09600\", title: \"Alta Hospitalar\" },\r\n    { color: \"#109683\", title: \"Reservado\" },\r\n    { color: \"#7C7C7C\", title: \"Alta médica\" },\r\n    { color: \"#165590\", title: \"Higienização\" },\r\n    { color: \"#65A42B\", title: \"Manutenção\" },\r\n    { color: \"#74603B\", title: \"Interd. Temp.\" },\r\n    {\r\n      icon: <Clock className=\"w-4 h-4\" fill=\"#65A42B\" />,\r\n      title: \"Manutenção | Higienização\",\r\n    },\r\n    { icon: <Paper className=\"w-4 h-4\" fill=\"#CC78FF\" />, title: \"Presc. dia\" },\r\n    {\r\n      icon: <Paper className=\"w-4 h-4\" fill=\"#65A42B\" />,\r\n      title: \"Presc. nova\",\r\n    },\r\n    { icon: <Skeleton className=\"w-4 h-4\" fill=\"#FFF\" />, title: \"Imagem\" },\r\n    { icon: <Lab className=\"w-4 h-4\" fill=\"#FFF\" />, title: \"Laboratório\" },\r\n    {\r\n      icon: (\r\n        <div className=\"flex\">\r\n          <Skeleton className=\"w-4 h-4\" fill=\"#D62F2F\" />\r\n          <Lab className=\"w-4 h-4\" fill=\"#D62F2F\" />\r\n        </div>\r\n      ),\r\n      title: \"Solicitado\",\r\n    },\r\n    {\r\n      icon: (\r\n        <div className=\"flex\">\r\n          <Skeleton className=\"w-4 h-4\" fill=\"#65A42B\" />\r\n          <Lab className=\"w-4 h-4\" fill=\"#65A42B\" />\r\n        </div>\r\n      ),\r\n      title: \"Liberado\",\r\n    },\r\n  ];\r\n\r\n  const configUnities =\r\n    !unities && !unit.length\r\n      ? []\r\n      : unities.map((loopUnit, i) => {\r\n          return { ...loopUnit, beds: unit[i] };\r\n        });\r\n\r\n  const unitiesCards =\r\n    unities &&\r\n    configUnities.map((unitie) => {\r\n      const iconSize = filter !== \"-\" ? \"w-5 h-5\" : \"w-3 h-3\";\r\n      const cardSize =\r\n        filter !== \"-\" ? \"w-42 h-16 tex-lg\" : \"w-28 h-12 text-xs\";\r\n\r\n      return (\r\n        <UnitBedsCard\r\n          key={unitie.DS_UNID_INT}\r\n          title={unitie.DS_UNID_INT}\r\n          data={unitie.beds}\r\n          dataKey=\"DS_RESUMO\"\r\n          bedVariant=\"outlined\"\r\n          className={unities.length !== 1 ? \"h-20 items-center\" : \"\"}\r\n          bedClass={`rounded-md ${cardSize}`}\r\n          containerClass={unities.length !== 1 ? \"\" : \"flex-wrap\"}\r\n          filterIcons={(bed) => {\r\n            const icons = [];\r\n            const seconds = 10 * 1000;\r\n\r\n            if (!!bed.TEMPO_MANUTENCAO) {\r\n              icons.push(\r\n                <div className=\"flex gap-1 items-center\">\r\n                  <Paper className={iconSize} fill=\"#65A42B\" />\r\n                  <span className=\"text-xs text-green-700\">\r\n                    {bed.TEMPO_MANUTENCAO}\r\n                  </span>\r\n                </div>\r\n              );\r\n            } else {\r\n              if (bed.STATUS_PRESCRICAO === \"PRIMEIRA PRESCRICAO\") {\r\n                icons.push(\r\n                  <Paper\r\n                    id={bed.DS_RESUMO + \" - paper1\"}\r\n                    className={`${iconSize} ${\r\n                      bed.STATUS_COR === \"ROXO\" ? \"\" : \"animate-pulse-plus\"\r\n                    }`}\r\n                    fill={bed.STATUS_COR === \"ROXO\" ? \"#CC78FF\" : \"#FFF\"}\r\n                  />\r\n                );\r\n\r\n                setTimeout(() => {\r\n                  const element = document.getElementById(\r\n                    bed.DS_RESUMO + \" - paper1\"\r\n                  );\r\n                  if (!!element) {\r\n                    element.classList.remove(\"animate-pulse-plus\");\r\n                    element.style.fill = \"#CC78FF\";\r\n                  }\r\n                }, seconds);\r\n              }\r\n\r\n              if (bed.STATUS_PRESCRICAO_2 === \"OUTRAS\") {\r\n                icons.push(\r\n                  <div className=\"flex\">\r\n                    <Paper\r\n                      id={bed.DS_RESUMO + \" - paper2\"}\r\n                      className={`${iconSize} ${\r\n                        bed.STATUS_COR_2 === \"VERDE\" ? \"\" : \"animate-pulse-plus\"\r\n                      }`}\r\n                      fill={bed.STATUS_COR_2 === \"VERDE\" ? \"#65A42B\" : \"#FFF\"}\r\n                    />\r\n                    <span className=\"text-xs text-red-500\">\r\n                      {bed.QTD_PEND_PRESC}\r\n                    </span>\r\n                  </div>\r\n                );\r\n\r\n                setTimeout(() => {\r\n                  const element = document.getElementById(\r\n                    bed.DS_RESUMO + \" - paper2\"\r\n                  );\r\n                  if (!!element) {\r\n                    element.classList.remove(\"animate-pulse-plus\");\r\n                    element.style.fill = \"#65A42B\";\r\n                  }\r\n                }, seconds);\r\n              }\r\n\r\n              if (\r\n                bed.QTD_PEND_LAB &&\r\n                !!bed.LABORATORIO_STATUS &&\r\n                bed.LABORATORIO_STATUS !== \"NAO TEM\"\r\n              ) {\r\n                icons.push(\r\n                  <div className=\"flex\">\r\n                    <Lab\r\n                      id={bed.DS_RESUMO + \" - lab\"}\r\n                      className={`${iconSize} ${\r\n                        bed.LABORATORIO_STATUS === \"PENDENTE\"\r\n                          ? \"\"\r\n                          : \"animate-pulse-plus\"\r\n                      }`}\r\n                      fill={\r\n                        bed.LABORATORIO_STATUS === \"PENDENTE\"\r\n                          ? \"#D62F2F\"\r\n                          : \"#65A42B\"\r\n                      }\r\n                    />\r\n                    <span className=\"text-xs text-red-500\">\r\n                      {bed.QTD_PEND_LAB}\r\n                    </span>\r\n                  </div>\r\n                );\r\n\r\n                setTimeout(() => {\r\n                  const element = document.getElementById(\r\n                    bed.DS_RESUMO + \" - lab\"\r\n                  );\r\n                  if (!!element) {\r\n                    element.classList.remove(\"animate-pulse-plus\");\r\n                  }\r\n                }, seconds);\r\n              }\r\n\r\n              if (!!bed.IMAGEM_STATUS && bed.IMAGEM_STATUS !== \"NAO TEM\") {\r\n                icons.push(\r\n                  <div className=\"flex\">\r\n                    <Skeleton\r\n                      id={bed.DS_RESUMO + \" - skeleton\"}\r\n                      className={`${iconSize} ${\r\n                        bed.IMAGEM_STATUS === \"PENDENTE\"\r\n                          ? \"\"\r\n                          : \"animate-pulse-plus\"\r\n                      }`}\r\n                      fill={\r\n                        bed.IMAGEM_STATUS === \"PENDENTE\" ? \"#D62F2F\" : \"#65A42B\"\r\n                      }\r\n                    />\r\n                    <span className=\"text-xs text-red-500\">\r\n                      {bed.QTD_PEND_IMAG}\r\n                    </span>\r\n                  </div>\r\n                );\r\n\r\n                setTimeout(() => {\r\n                  const element = document.getElementById(\r\n                    bed.DS_RESUMO + \" - skeleton\"\r\n                  );\r\n                  if (!!element) {\r\n                    element.classList.remove(\"animate-pulse-plus\");\r\n                  }\r\n                }, seconds);\r\n              }\r\n            }\r\n\r\n            return icons;\r\n          }}\r\n        />\r\n      );\r\n    });\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <main className=\"min-h-screen w-full flex flex-col justify-center\">\r\n      <Helmet>\r\n        <title>CMDC | HD - UI - UTI | Geral</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"Dashboard principal de HD | UI | UTI.\"\r\n        />\r\n      </Helmet>\r\n      <section className=\"flex-1 flex flex-col justify-center\">\r\n        <div className=\"flex items-center justify-between gap-2 mt-3 w-full max-w-7xl mx-auto\">\r\n          <SimpleCard\r\n            data={\r\n              unities?.length !== 1\r\n                ? totalUnitData?.TOH_ON_LINE\r\n                : unities[0].PERCENTAGEM_OCUPACAO\r\n            }\r\n            type=\"string\"\r\n            title=\"% Ocupação\"\r\n            className=\"w-32 h-15 bg-opacity-50 text-red-500 text-xslg font-semibold\"\r\n            dataClass=\"text-3xl\"\r\n            toolTipConfig={{\r\n              title: \"% Ocupação\",\r\n              desc: \"Este card mostra  o percentual de ocupação de leitos, não considerando os leitos extras, HD's e Unidade Jardins. Código das unidades que não são consideradas (5,22,19,1,21,41). Fórmula do cálculo : leitos ocupados / (leitos extras ocupados + leitos operacionais) * 100\",\r\n            }}\r\n          />\r\n          <h1 className=\"text-2xl text-white text-center font-bold\">\r\n            HD | UI | UTI\r\n          </h1>\r\n          <Select\r\n            value={filter}\r\n            setValue={(value) => {\r\n              setFilter(value);\r\n              setFetch(true);\r\n            }}\r\n            defaultValue=\"GERAL\"\r\n            options={unitOptions}\r\n            className=\"text-xs h-7\"\r\n          />\r\n        </div>\r\n        <div className=\"px-5\">\r\n          <div\r\n            ref={divBeds}\r\n            className=\"flex flex-col gap-3 max-w-7xl mx-auto mt-3 h-screen max-h-none sm:max-h-113 py-1 overflow-y-scroll scroll-hide\"\r\n          >\r\n            {unitiesCards}\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <div className=\"relative sm:block flex flex-col\">\r\n        <AsideInformations\r\n          data={titles}\r\n          variant=\"outlined\"\r\n          labelClass=\"flex-wrap sm:justify-around flex-row\"\r\n          className=\"relative z-10 max-w-4xl m-auto text-xs\"\r\n        />\r\n        <TascomFooter className=\"sm:absolute relative bottom-0 left-0\" />\r\n      </div>\r\n      {error && <Error message={error} />}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default HDUIUTIGeneral;\r\n"]},"metadata":{},"sourceType":"module"}