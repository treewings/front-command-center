{"ast":null,"code":"import _asyncToGenerator from\"/command-center/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/command-center/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/command-center/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{Helmet}from\"react-helmet\";import{TascomFooter,SimpleCard,BarGraphic}from\"../../components\";import{Loading,Error}from\"../../helper\";import useUtilities from\"../../service/useUtilities\";import{useTransition,animated,config}from\"react-spring\";import useDrugstore from\"../../service/useDrugstore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OPMEOne=function OPMEOne(){var timeInterval=5000;var intervalPagination=60000;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];var _React$useMemo=React.useMemo(useUtilities,[]),getFontSize=_React$useMemo.getFontSize;// Requests\nvar _useDrugstore=useDrugstore(),getTotalOPMES=_useDrugstore.getTotalOPMES,getPercentOPMES=_useDrugstore.getPercentOPMES,getSurgerisOPME=_useDrugstore.getSurgerisOPME,getProcedimentsPerDay=_useDrugstore.getProcedimentsPerDay;// OPMES\nvar refGetTotalOPMES=React.useRef(getTotalOPMES);var refGetPercentOPMES=React.useRef(getPercentOPMES);var refGetProcedimentsPerDay=React.useRef(getProcedimentsPerDay);var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),totalOPMES=_React$useState6[0],setTotalOPMES=_React$useState6[1];var _React$useState7=React.useState(),_React$useState8=_slicedToArray(_React$useState7,2),percentOPME=_React$useState8[0],setPercentOPME=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),procedimentsOPME=_React$useState10[0],setProcedimentsOPME=_React$useState10[1];React.useEffect(function(){function executeRequest(){return _executeRequest.apply(this,arguments);}function _executeRequest(){_executeRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$refGetTotalOPM,_totalOPMES,_yield$refGetPercentO,percentOPMES,_yield$refGetProcedim,procediments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return refGetTotalOPMES.current();case 3:_yield$refGetTotalOPM=_context.sent;_totalOPMES=_yield$refGetTotalOPM.totalOPMES;_context.next=7;return refGetPercentOPMES.current();case 7:_yield$refGetPercentO=_context.sent;percentOPMES=_yield$refGetPercentO.percentOPMES;_context.next=11;return refGetProcedimentsPerDay.current();case 11:_yield$refGetProcedim=_context.sent;procediments=_yield$refGetProcedim.procediments;setTotalOPMES(_totalOPMES);setPercentOPME(percentOPMES);setProcedimentsOPME(procediments);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 21:_context.prev=21;setLoading(false);return _context.finish(21);case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,18,21,24]]);}));return _executeRequest.apply(this,arguments);}executeRequest();var interval=setInterval(function(){executeRequest();},timeInterval);return function(){return clearInterval(interval);};},[]);// Procediments OPME\nvar refGetSurgerisOPME=React.useRef(getSurgerisOPME);var _React$useState11=React.useState(),_React$useState12=_slicedToArray(_React$useState11,2),surgeriesOPME=_React$useState12[0],setSurgeriesOPME=_React$useState12[1];var _React$useState13=React.useState(1),_React$useState14=_slicedToArray(_React$useState13,2),pageOne=_React$useState14[0],setPageOne=_React$useState14[1];React.useEffect(function(){function executeRequest(){return _executeRequest2.apply(this,arguments);}function _executeRequest2(){_executeRequest2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$refGetSurgeris,surgeries,totalPage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return refGetSurgerisOPME.current(pageOne,13);case 3:_yield$refGetSurgeris=_context2.sent;surgeries=_yield$refGetSurgeris.surgeries;totalPage=_yield$refGetSurgeris.totalPage;setError(false);if(pageOne>totalPage){setPageOne(1);}else{setSurgeriesOPME(surgeries);}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);setError(_context2.t0.message);case 13:_context2.prev=13;setLoading(false);return _context2.finish(13);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10,13,16]]);}));return _executeRequest2.apply(this,arguments);}executeRequest();var interval=setInterval(function(){setPageOne(function(page){return page+1;});},intervalPagination);return function(){return clearInterval(interval);};},[pageOne]);//Transitions\nvar transitionSurgeries=useTransition(surgeriesOPME?surgeriesOPME:[],{from:{opacity:0,y:-10},enter:{opacity:1,y:0},leave:{display:\"none\"},trail:100,delay:50,config:config.gentle});//Configurations from charts\nvar configBars={bars:[{key:\"QTD_SOLICITADA\",fill:\"url(#gdr1-1)\"}],gradients:[{id:\"gdr1-1\",from:\"rgba(0, 0, 10, 0.2)\",to:\"#1093C2\",x:\"0\",y:\"1\"}]};if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"main\",{className:\"min-h-screen w-full flex flex-col\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"CMDC | Farm\\xE1cia | OPME | Procedimentos\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Dashboard relacionado a farm\\xE1cia OPME - procedimentos\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"px-5 flex-1 flex flex-col justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 w-full max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl text-white text-center font-bold\",children:\"FARM\\xC1CIA - OPME\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid sm:grid-cols-6 grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsx(SimpleCard,{data:totalOPMES,title:\"Nr. Procedimento Total - 24H\",rounded:{class:\"bg-blue-400 w-12 h-12\"},className:\"h-42 bg-opacity-50 text-white text-xs relative\",dataClass:\"text-5xl text-blue-400\"}),/*#__PURE__*/_jsx(SimpleCard,{data:percentOPME,type:\"string\",title:\"OPME - 24H\",className:\"h-42 bg-opacity-50 text-white text-xs relative\",dataClass:\"text-5xl text-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-42 bg-blackCMDC rounded-lg bg-opacity-50 col-span-4 py-1\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"relative w-5/6 m-auto text-white text-sm text-center border-b-2 border-dashed border-blue-300 border-opacity-30\",children:[\"Total Procedimentos Solicitados com OPME - 30 Dias\",/*#__PURE__*/_jsx(\"span\",{className:\"absolute -bottom-2 -right-6 text-xsm text-blue-300\",children:\"MAX\"})]}),/*#__PURE__*/_jsx(BarGraphic,{className:\"h-full w-full\",data:procedimentsOPME,barSize:2,radius:0.2,backgroundFill:\"transparent\",label:{position:\"center\",fontSize:\".5rem\",fill:\"#FFF\",fontWeight:600},x:{type:\"category\",dataKey:\"DATA\",interval:0,tick:{fontSize:\"0.5rem\",fill:\"#fff\"},axisLine:false,tickLine:false},y:{hide:true},config:configBars,margin:{top:2*getFontSize(),right:0.2*getFontSize(),left:-0.2*getFontSize(),bottom:0.6*getFontSize()}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 w-full h-102 rounded-lg bg-blackCMDC bg-opacity-50\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm text-white text-center mb-1\",children:\"Procedimentos | Cirurgias com OPME para o Pr\\xF3ximo Dia\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-88 flex gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 w-36 h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"tex-sm text-white\",children:\"Aviso\"}),transitionSurgeries(function(style,surgerie){return/*#__PURE__*/_jsx(animated.div,{style:style,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-400 text-xs\",children:surgerie.AVISO})});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 w-full h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"tex-sm text-white\",children:\"Itens\"}),transitionSurgeries(function(style,surgerie){return/*#__PURE__*/_jsx(animated.div,{style:style,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-200 text-xs\",children:surgerie.PROCEDIMENTO})});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 w-36 h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"tex-sm text-white\",children:\"QTD SOLIC.\"}),transitionSurgeries(function(style,surgerie){return/*#__PURE__*/_jsx(animated.div,{style:style,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-200 text-xs\",children:surgerie.QTD_SOLICITADA})});})]})]})]})]})}),/*#__PURE__*/_jsx(TascomFooter,{}),error&&/*#__PURE__*/_jsx(Error,{message:error})]});};export default OPMEOne;","map":{"version":3,"sources":["/command-center/src/pages/OPMEOne/OPMEOne.jsx"],"names":["React","Helmet","TascomFooter","SimpleCard","BarGraphic","Loading","Error","useUtilities","useTransition","animated","config","useDrugstore","OPMEOne","timeInterval","intervalPagination","useState","loading","setLoading","error","setError","useMemo","getFontSize","getTotalOPMES","getPercentOPMES","getSurgerisOPME","getProcedimentsPerDay","refGetTotalOPMES","useRef","refGetPercentOPMES","refGetProcedimentsPerDay","totalOPMES","setTotalOPMES","percentOPME","setPercentOPME","procedimentsOPME","setProcedimentsOPME","useEffect","executeRequest","current","percentOPMES","procediments","message","interval","setInterval","clearInterval","refGetSurgerisOPME","surgeriesOPME","setSurgeriesOPME","pageOne","setPageOne","surgeries","totalPage","page","transitionSurgeries","from","opacity","y","enter","leave","display","trail","delay","gentle","configBars","bars","key","fill","gradients","id","to","x","class","position","fontSize","fontWeight","type","dataKey","tick","axisLine","tickLine","hide","top","right","left","bottom","style","surgerie","AVISO","PROCEDIMENTO","QTD_SOLICITADA"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { TascomFooter, SimpleCard, BarGraphic } from \"../../components\";\r\nimport { Loading, Error } from \"../../helper\";\r\nimport useUtilities from \"../../service/useUtilities\";\r\nimport { useTransition, animated, config } from \"react-spring\";\r\nimport useDrugstore from \"../../service/useDrugstore\";\r\n\r\nconst OPMEOne = () => {\r\n  const timeInterval = 5000;\r\n  const intervalPagination = 60000;\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n\r\n  const { getFontSize } = React.useMemo(useUtilities, []);\r\n\r\n  // Requests\r\n  const {\r\n    getTotalOPMES,\r\n    getPercentOPMES,\r\n    getSurgerisOPME,\r\n    getProcedimentsPerDay,\r\n  } = useDrugstore();\r\n\r\n  // OPMES\r\n  const refGetTotalOPMES = React.useRef(getTotalOPMES);\r\n  const refGetPercentOPMES = React.useRef(getPercentOPMES);\r\n  const refGetProcedimentsPerDay = React.useRef(getProcedimentsPerDay);\r\n  const [totalOPMES, setTotalOPMES] = React.useState();\r\n  const [percentOPME, setPercentOPME] = React.useState();\r\n  const [procedimentsOPME, setProcedimentsOPME] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    async function executeRequest() {\r\n      try {\r\n        const { totalOPMES } = await refGetTotalOPMES.current();\r\n        const { percentOPMES } = await refGetPercentOPMES.current();\r\n        const { procediments } = await refGetProcedimentsPerDay.current();\r\n        setTotalOPMES(totalOPMES);\r\n        setPercentOPME(percentOPMES);\r\n        setProcedimentsOPME(procediments);\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    executeRequest();\r\n\r\n    const interval = setInterval(() => {\r\n      executeRequest();\r\n    }, timeInterval);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Procediments OPME\r\n  const refGetSurgerisOPME = React.useRef(getSurgerisOPME);\r\n  const [surgeriesOPME, setSurgeriesOPME] = React.useState();\r\n  const [pageOne, setPageOne] = React.useState(1);\r\n\r\n  React.useEffect(() => {\r\n    async function executeRequest() {\r\n      try {\r\n        const { surgeries, totalPage } = await refGetSurgerisOPME.current(\r\n          pageOne,\r\n          13\r\n        );\r\n        setError(false);\r\n        if (pageOne > totalPage) {\r\n          setPageOne(1);\r\n        } else {\r\n          setSurgeriesOPME(surgeries);\r\n        }\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    executeRequest();\r\n    const interval = setInterval(() => {\r\n      setPageOne((page) => page + 1);\r\n    }, intervalPagination);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [pageOne]);\r\n\r\n  //Transitions\r\n  const transitionSurgeries = useTransition(\r\n    surgeriesOPME ? surgeriesOPME : [],\r\n    {\r\n      from: { opacity: 0, y: -10 },\r\n      enter: { opacity: 1, y: 0 },\r\n      leave: { display: \"none\" },\r\n      trail: 100,\r\n      delay: 50,\r\n      config: config.gentle,\r\n    }\r\n  );\r\n\r\n  //Configurations from charts\r\n  const configBars = {\r\n    bars: [\r\n      {\r\n        key: \"QTD_SOLICITADA\",\r\n        fill: \"url(#gdr1-1)\",\r\n      },\r\n    ],\r\n    gradients: [\r\n      {\r\n        id: \"gdr1-1\",\r\n        from: \"rgba(0, 0, 10, 0.2)\",\r\n        to: \"#1093C2\",\r\n        x: \"0\",\r\n        y: \"1\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <main className=\"min-h-screen w-full flex flex-col\">\r\n      <Helmet>\r\n        <title>CMDC | Farmácia | OPME | Procedimentos</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"Dashboard relacionado a farmácia OPME - procedimentos\"\r\n        />\r\n      </Helmet>\r\n      <section className=\"px-5 flex-1 flex flex-col justify-center\">\r\n        <div className=\"flex flex-col gap-2 w-full max-w-7xl mx-auto\">\r\n          <h1 className=\"text-2xl text-white text-center font-bold\">\r\n            FARMÁCIA - OPME\r\n          </h1>\r\n          <div className=\"grid sm:grid-cols-6 grid-cols-2 gap-2\">\r\n            <SimpleCard\r\n              data={totalOPMES}\r\n              title=\"Nr. Procedimento Total - 24H\"\r\n              rounded={{ class: \"bg-blue-400 w-12 h-12\" }}\r\n              className=\"h-42 bg-opacity-50 text-white text-xs relative\"\r\n              dataClass=\"text-5xl text-blue-400\"\r\n            />\r\n            <SimpleCard\r\n              data={percentOPME}\r\n              type=\"string\"\r\n              title=\"OPME - 24H\"\r\n              className=\"h-42 bg-opacity-50 text-white text-xs relative\"\r\n              dataClass=\"text-5xl text-white\"\r\n            />\r\n            <div className=\"h-42 bg-blackCMDC rounded-lg bg-opacity-50 col-span-4 py-1\">\r\n              <h2 className=\"relative w-5/6 m-auto text-white text-sm text-center border-b-2 border-dashed border-blue-300 border-opacity-30\">\r\n                Total Procedimentos Solicitados com OPME - 30 Dias\r\n                <span className=\"absolute -bottom-2 -right-6 text-xsm text-blue-300\">\r\n                  MAX\r\n                </span>\r\n              </h2>\r\n              <BarGraphic\r\n                className=\"h-full w-full\"\r\n                data={procedimentsOPME}\r\n                barSize={2}\r\n                radius={0.2}\r\n                backgroundFill=\"transparent\"\r\n                label={{\r\n                  position: \"center\",\r\n                  fontSize: \".5rem\",\r\n                  fill: \"#FFF\",\r\n                  fontWeight: 600,\r\n                }}\r\n                x={{\r\n                  type: \"category\",\r\n                  dataKey: \"DATA\",\r\n                  interval: 0,\r\n                  tick: {\r\n                    fontSize: \"0.5rem\",\r\n                    fill: \"#fff\",\r\n                  },\r\n                  axisLine: false,\r\n                  tickLine: false,\r\n                }}\r\n                y={{\r\n                  hide: true,\r\n                }}\r\n                config={configBars}\r\n                margin={{\r\n                  top: 2 * getFontSize(),\r\n                  right: 0.2 * getFontSize(),\r\n                  left: -0.2 * getFontSize(),\r\n                  bottom: 0.6 * getFontSize(),\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"p-4 w-full h-102 rounded-lg bg-blackCMDC bg-opacity-50\">\r\n            <h2 className=\"text-sm text-white text-center mb-1\">\r\n              Procedimentos | Cirurgias com OPME para o Próximo Dia\r\n            </h2>\r\n            <div className=\"w-full h-88 flex gap-2\">\r\n              <div className=\"p-2 w-36 h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\">\r\n                <h4 className=\"tex-sm text-white\">Aviso</h4>\r\n                {transitionSurgeries((style, surgerie) => (\r\n                  <animated.div style={style}>\r\n                    <span className=\"text-blue-400 text-xs\">\r\n                      {surgerie.AVISO}\r\n                    </span>\r\n                  </animated.div>\r\n                ))}\r\n              </div>\r\n              <div className=\"p-2 w-full h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\">\r\n                <h4 className=\"tex-sm text-white\">Itens</h4>\r\n                {transitionSurgeries((style, surgerie) => (\r\n                  <animated.div style={style}>\r\n                    <span className=\"text-blue-200 text-xs\">\r\n                      {surgerie.PROCEDIMENTO}\r\n                    </span>\r\n                  </animated.div>\r\n                ))}\r\n              </div>\r\n              <div className=\"p-2 w-36 h-full rounded-lg bg-blackCMDC bg-opacity-50 flex flex-col items-center\">\r\n                <h4 className=\"tex-sm text-white\">QTD SOLIC.</h4>\r\n                {transitionSurgeries((style, surgerie) => (\r\n                  <animated.div style={style}>\r\n                    <span className=\"text-blue-200 text-xs\">\r\n                      {surgerie.QTD_SOLICITADA}\r\n                    </span>\r\n                  </animated.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <TascomFooter />\r\n      {error && <Error message={error} />}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default OPMEOne;\r\n"]},"metadata":{},"sourceType":"module"}