{"ast":null,"code":"import _asyncToGenerator from\"/command-center/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/command-center/node_modules/@babel/runtime/regenerator/index.js\";import{axios}from\"./api\";import useUtilities from\"./useUtilities\";function useManagmentHight(){var _useUtilities=useUtilities(),formatDate=_useUtilities.formatDate;function getManagmentHight(){return _getManagmentHight.apply(this,arguments);}function _getManagmentHight(){_getManagmentHight=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var responseOne,managment,responseTwo,managmentUpp,uppDates,upp,altas,internacoes,i,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"managment_high_previous\");case 3:responseOne=_context.sent;managment=responseOne.data.managment_high_previous;_context.next=7;return axios.get(\"managment_high_previous_upp\");case 7:responseTwo=_context.sent;managmentUpp=responseTwo.data.managment_high_previous_upp;uppDates=[];managmentUpp.forEach(function(e){if(!uppDates.includes(formatDate(e.DATA_PREVISTA,\"DM\"))){uppDates.push(formatDate(e.DATA_PREVISTA,\"DM\"));}});upp=[0,0,0];managmentUpp.forEach(function(e){uppDates.forEach(function(uppDate,i){if(formatDate(e.DATA_PREVISTA,\"DM\")===uppDate){if(e.TIPO===\"ALTAS PREV UPP DIA\"){upp[i]++;}}});});altas=[];managment.forEach(function(e){if(!altas.includes(formatDate(e.DATA_PREVISTA,\"DM\"))){altas.push(formatDate(e.DATA_PREVISTA,\"DM\"));}});internacoes=[].concat(altas);for(i=0;i<altas.length;i++){altas[i]={altas_prev:0,upp:upp[i],dia:altas[i]};}for(_i=0;_i<internacoes.length;_i++){internacoes[_i]={internacoes_prev:0,dia:internacoes[_i]};}managment.forEach(function(e){altas.forEach(function(t){if(formatDate(e.DATA_PREVISTA,\"DM\")===t.dia){if(e.TIPO===\"ALTAS PREV PROX 3DIAS\"){t.altas_prev++;}}});internacoes.forEach(function(o){if(formatDate(e.DATA_PREVISTA,\"DM\")===o.dia){if(e.TIPO===\"INTERNACOES PREV PROX 3DIAS\"){o.internacoes_prev++;}}});});return _context.abrupt(\"return\",{internations:internacoes,highs:altas});case 22:_context.prev=22;_context.t0=_context[\"catch\"](0);throw new Error(_context.t0.message);case 25:case\"end\":return _context.stop();}}},_callee,null,[[0,22]]);}));return _getManagmentHight.apply(this,arguments);}return{getManagmentHight:getManagmentHight};}export default useManagmentHight;","map":{"version":3,"sources":["/command-center/src/service/useManagmentHight.js"],"names":["axios","useUtilities","useManagmentHight","formatDate","getManagmentHight","get","responseOne","managment","data","managment_high_previous","responseTwo","managmentUpp","managment_high_previous_upp","uppDates","forEach","e","includes","DATA_PREVISTA","push","upp","uppDate","i","TIPO","altas","internacoes","length","altas_prev","dia","internacoes_prev","t","o","internations","highs","Error","message"],"mappings":"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","sourcesContent":["import { axios } from \"./api\";\r\nimport useUtilities from \"./useUtilities\";\r\n\r\nfunction useManagmentHight() {\r\n  const { formatDate } = useUtilities();\r\n\r\n  async function getManagmentHight() {\r\n    try {\r\n      const responseOne = await axios.get(\"managment_high_previous\");\r\n      const managment = responseOne.data.managment_high_previous;\r\n      const responseTwo = await axios.get(\"managment_high_previous_upp\");\r\n      const managmentUpp = responseTwo.data.managment_high_previous_upp;\r\n\r\n      const uppDates = [];\r\n      managmentUpp.forEach((e) => {\r\n        if (!uppDates.includes(formatDate(e.DATA_PREVISTA, \"DM\"))) {\r\n          uppDates.push(formatDate(e.DATA_PREVISTA, \"DM\"));\r\n        }\r\n      });\r\n\r\n      const upp = [0, 0, 0];\r\n      managmentUpp.forEach((e) => {\r\n        uppDates.forEach((uppDate, i) => {\r\n          if (formatDate(e.DATA_PREVISTA, \"DM\") === uppDate) {\r\n            if (e.TIPO === \"ALTAS PREV UPP DIA\") {\r\n              upp[i]++;\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      const altas = [];\r\n      managment.forEach((e) => {\r\n        if (!altas.includes(formatDate(e.DATA_PREVISTA, \"DM\"))) {\r\n          altas.push(formatDate(e.DATA_PREVISTA, \"DM\"));\r\n        }\r\n      });\r\n      const internacoes = [...altas];\r\n\r\n      for (let i = 0; i < altas.length; i++) {\r\n        altas[i] = { altas_prev: 0, upp: upp[i], dia: altas[i] };\r\n      }\r\n\r\n      for (let i = 0; i < internacoes.length; i++) {\r\n        internacoes[i] = { internacoes_prev: 0, dia: internacoes[i] };\r\n      }\r\n\r\n      managment.forEach((e) => {\r\n        altas.forEach((t) => {\r\n          if (formatDate(e.DATA_PREVISTA, \"DM\") === t.dia) {\r\n            if (e.TIPO === \"ALTAS PREV PROX 3DIAS\") {\r\n              t.altas_prev++;\r\n            }\r\n          }\r\n        });\r\n\r\n        internacoes.forEach((o) => {\r\n          if (formatDate(e.DATA_PREVISTA, \"DM\") === o.dia) {\r\n            if (e.TIPO === \"INTERNACOES PREV PROX 3DIAS\") {\r\n              o.internacoes_prev++;\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      return {\r\n        internations: internacoes,\r\n        highs: altas,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  return {\r\n    getManagmentHight,\r\n  };\r\n}\r\n\r\nexport default useManagmentHight;\r\n"]},"metadata":{},"sourceType":"module"}