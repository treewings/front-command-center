{"ast":null,"code":"import _objectSpread from\"/command-center/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/command-center/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/command-center/node_modules/@babel/runtime/regenerator/index.js\";import{axios}from\"./api\";function useHDUIUTI(){var path=\"hd_ui_uti/\";function getUnities(){return _getUnities.apply(this,arguments);}function _getUnities(){_getUnities=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json,unit;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(path+\"hd_ui_uti_per_unit?unit=all\");case 3:response=_context.sent;json=response.data;unit=json.hd_ui_uti_units;return _context.abrupt(\"return\",{unit:unit});case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);throw new Error(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _getUnities.apply(this,arguments);}function getBeds(_x,_x2,_x3){return _getBeds.apply(this,arguments);}function _getBeds(){_getBeds=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(unit,page,limit){var response,json,unitBeds,totPages;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(path+\"hd_ui_uti_per_unit?unit=\".concat(unit,\"&page=\").concat(page,\"&limitItens=\").concat(limit));case 3:response=_context2.sent;json=response.data.hd_ui_uti_per_unit;unitBeds=json.result;totPages=json.totalPage;return _context2.abrupt(\"return\",{unitBeds:unitBeds,totPages:totPages});case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);throw new Error(_context2.t0.message);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return _getBeds.apply(this,arguments);}function getReasonForDischarge(){return _getReasonForDischarge.apply(this,arguments);}function _getReasonForDischarge(){_getReasonForDischarge=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,json,predictedExits;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(path+\"ui_uti_reason_for_discharge\");case 3:response=_context3.sent;json=response.data.ui_uti_reason_for_discharge[0];predictedExits={homeCare:{total:json.HOMECARE_UI+json.HOMECARE_UTI,ui:json.HOMECARE_UI,uti:json.HOMECARE_UTI},obito:{total:json.OBITO_UI+json.OBITO_UTI,ui:json.OBITO_UI,uti:json.OBITO_UTI},externTransfer:{total:json.TRANSFERENCIA_EXTERNA_UI+json.TRANSFERENCIA_EXTERNA_UTI,ui:json.TRANSFERENCIA_EXTERNA_UI,uti:json.TRANSFERENCIA_EXTERNA_UTI},hospitalization:{total:json.ALTA_HOSPITALAR_UI+json.ALTA_HOSPITALAR_UTI,ui:json.ALTA_HOSPITALAR_UI,uti:json.ALTA_HOSPITALAR_UTI}};return _context3.abrupt(\"return\",{predictedExits:predictedExits});case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);throw new Error(_context3.t0.message);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return _getReasonForDischarge.apply(this,arguments);}function getPatients(_x4,_x5){return _getPatients.apply(this,arguments);}function _getPatients(){_getPatients=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(page,limit){var response,json,totalPage,patients;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(path+\"ui_uti_source_and_destination_beds?page=\".concat(page,\"&limitItens=\").concat(limit));case 3:response=_context4.sent;json=response.data.ui_uti_source_and_destination_beds;totalPage=json.totalPage;patients=json.result.map(function(_ref){var _splitedName$;var NM_PACIENTE=_ref.NM_PACIENTE,DT_NASCIMENTO=_ref.DT_NASCIMENTO,LEITO_ANTERIOR=_ref.LEITO_ANTERIOR,DS_LEITO=_ref.DS_LEITO;var splitedName=(NM_PACIENTE===null||NM_PACIENTE===void 0?void 0:NM_PACIENTE.split(\" \"))||[\"\"];var name=splitedName[0]+\" \"+splitedName[1]+\" \"+(((_splitedName$=splitedName[1])===null||_splitedName$===void 0?void 0:_splitedName$.length)<=3?splitedName[2]:\"\");return{name:name,DT_NASCIMENTO:DT_NASCIMENTO,LEITO_ANTERIOR:LEITO_ANTERIOR,DS_LEITO:DS_LEITO};});return _context4.abrupt(\"return\",{patients:patients,totalPage:totalPage});case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);throw new Error(_context4.t0.message);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return _getPatients.apply(this,arguments);}function getVacantOccupiedBeds(){return _getVacantOccupiedBeds.apply(this,arguments);}function _getVacantOccupiedBeds(){_getVacantOccupiedBeds=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response,json,vacantsAndOccupied;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(path+\"ui_uti_vacant_and_occupied_beds\");case 3:response=_context5.sent;json=response.data.ui_uti_vacant_and_occupied_beds[0];vacantsAndOccupied={occupied:{total:json.LEITOS_OCUPADOS_UI+json.LEITOS_OCUPADOS_UTI,ui:json.LEITOS_OCUPADOS_UI,uti:json.LEITOS_OCUPADOS_UTI},vacants:{total:json.LEITOS_VAGOS_UI+json.LEITOS_VAGOS_UTI,ui:json.LEITOS_VAGOS_UI,uti:json.LEITOS_VAGOS_UTI}};vacantsAndOccupied.total=vacantsAndOccupied.occupied.total+vacantsAndOccupied.vacants.total;return _context5.abrupt(\"return\",{vacantsAndOccupied:vacantsAndOccupied});case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);throw new Error(_context5.t0.message);case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return _getVacantOccupiedBeds.apply(this,arguments);}function getNeedVacancies(){return _getNeedVacancies.apply(this,arguments);}function _getNeedVacancies(){_getNeedVacancies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var responseUTI,responseUI,ui,uiTotal,uti,utiTotal;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(path+\"uti_need_for_vacancies\");case 3:responseUTI=_context6.sent;_context6.next=6;return axios.get(path+\"ui_need_for_vacancies\");case 6:responseUI=_context6.sent;ui=responseUI.data.ui_need_for_vacancies[0];uiTotal=0;if(!!ui){uiTotal=ui.PS_UI_HJ+ui.RESERVAS_UI_HJ+ui.UPP_UI_HJ;};uti=responseUTI.data.uti_need_for_vacancies[0];utiTotal=0;if(!!uti){utiTotal=uti.PS_UTI_HJ+uti.RESERVAS_UTI_HJ+uti.UPP_UTI_HJ;};return _context6.abrupt(\"return\",{ui:_objectSpread(_objectSpread({},ui),{},{TOTAL:uiTotal}),uti:_objectSpread(_objectSpread({},uti),{},{TOTAL:utiTotal})});case 18:_context6.prev=18;_context6.t0=_context6[\"catch\"](0);throw new Error(_context6.t0.message);case 21:case\"end\":return _context6.stop();}}},_callee6,null,[[0,18]]);}));return _getNeedVacancies.apply(this,arguments);}function getInternalTransfer(){return _getInternalTransfer.apply(this,arguments);}function _getInternalTransfer(){_getInternalTransfer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var response,json,internalTransfer;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.get(path+\"ui_uti_internal_transfer\");case 3:response=_context7.sent;json=response.data.ui_uti_internal_transfer;internalTransfer={total:0,ui:0,uti:0};json.forEach(function(transfer){if(transfer.TIPO_TRANSFERENCIA===\"E TRANSFERENCIA UTI\"){internalTransfer.total+=transfer.QTD;internalTransfer.uti+=transfer.QTD;}else if(transfer.TIPO_TRANSFERENCIA===\"E TRANSFERENCIA UI\"){internalTransfer.total+=transfer.QTD;internalTransfer.ui+=transfer.QTD;}});return _context7.abrupt(\"return\",internalTransfer);case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);throw new Error(_context7.t0.message);case 13:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return _getInternalTransfer.apply(this,arguments);}function getRequestDays(){return _getRequestDays.apply(this,arguments);}function _getRequestDays(){_getRequestDays=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var response,json,onDay,fiveDays;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.get(path+\"ui_uti_vacancies_requested_last_5_days\");case 3:response=_context8.sent;json=response.data.ui_uti_vacancies_requested_last_5_days;fiveDays=[];json.forEach(function(_ref2){var HR_SOLICITACAO=_ref2.HR_SOLICITACAO,INTERNACAO_EM=_ref2.INTERNACAO_EM,DIA=_ref2.DIA;if(DIA===\"HOJE\"){onDay={day:HR_SOLICITACAO.slice(0,5),internations:INTERNACAO_EM};}else{fiveDays.unshift({day:HR_SOLICITACAO.slice(0,5),internations:INTERNACAO_EM});}});return _context8.abrupt(\"return\",{onDay:onDay,fiveDays:fiveDays});case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](0);throw new Error(_context8.t0.message);case 13:case\"end\":return _context8.stop();}}},_callee8,null,[[0,10]]);}));return _getRequestDays.apply(this,arguments);}function getVacanciesPerFloor(){return _getVacanciesPerFloor.apply(this,arguments);}function _getVacanciesPerFloor(){_getVacanciesPerFloor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var response,json;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.get(path+\"vacancies_per_floor\");case 3:response=_context9.sent;json=response.data.vacancies_per_floor;return _context9.abrupt(\"return\",{vacanciesPerFlor:json});case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);throw new Error(_context9.t0.message);case 11:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return _getVacanciesPerFloor.apply(this,arguments);}return{getUnities:getUnities,getBeds:getBeds,getReasonForDischarge:getReasonForDischarge,getPatients:getPatients,getVacantOccupiedBeds:getVacantOccupiedBeds,getNeedVacancies:getNeedVacancies,getInternalTransfer:getInternalTransfer,getRequestDays:getRequestDays,getVacanciesPerFloor:getVacanciesPerFloor};}export default useHDUIUTI;","map":{"version":3,"sources":["/command-center/src/service/useHDUIUTI.js"],"names":["axios","useHDUIUTI","path","getUnities","get","response","json","data","unit","hd_ui_uti_units","Error","message","getBeds","page","limit","hd_ui_uti_per_unit","unitBeds","result","totPages","totalPage","getReasonForDischarge","ui_uti_reason_for_discharge","predictedExits","homeCare","total","HOMECARE_UI","HOMECARE_UTI","ui","uti","obito","OBITO_UI","OBITO_UTI","externTransfer","TRANSFERENCIA_EXTERNA_UI","TRANSFERENCIA_EXTERNA_UTI","hospitalization","ALTA_HOSPITALAR_UI","ALTA_HOSPITALAR_UTI","getPatients","ui_uti_source_and_destination_beds","patients","map","NM_PACIENTE","DT_NASCIMENTO","LEITO_ANTERIOR","DS_LEITO","splitedName","split","name","length","getVacantOccupiedBeds","ui_uti_vacant_and_occupied_beds","vacantsAndOccupied","occupied","LEITOS_OCUPADOS_UI","LEITOS_OCUPADOS_UTI","vacants","LEITOS_VAGOS_UI","LEITOS_VAGOS_UTI","getNeedVacancies","responseUTI","responseUI","ui_need_for_vacancies","uiTotal","PS_UI_HJ","RESERVAS_UI_HJ","UPP_UI_HJ","uti_need_for_vacancies","utiTotal","PS_UTI_HJ","RESERVAS_UTI_HJ","UPP_UTI_HJ","TOTAL","getInternalTransfer","ui_uti_internal_transfer","internalTransfer","forEach","transfer","TIPO_TRANSFERENCIA","QTD","getRequestDays","ui_uti_vacancies_requested_last_5_days","fiveDays","HR_SOLICITACAO","INTERNACAO_EM","DIA","onDay","day","slice","internations","unshift","getVacanciesPerFloor","vacancies_per_floor","vacanciesPerFlor"],"mappings":"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","sourcesContent":["import { axios } from \"./api\";\r\n\r\nfunction useHDUIUTI() {\r\n  const path = \"hd_ui_uti/\";\r\n\r\n  async function getUnities() {\r\n    try {\r\n      const response = await axios.get(path + \"hd_ui_uti_per_unit?unit=all\");\r\n      const json = response.data;\r\n      const unit = json.hd_ui_uti_units;\r\n\r\n      return {\r\n        unit,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getBeds(unit, page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `hd_ui_uti_per_unit?unit=${unit}&page=${page}&limitItens=${limit}`);\r\n      const json = response.data.hd_ui_uti_per_unit;\r\n      const unitBeds = json.result;\r\n      const totPages = json.totalPage;\r\n\r\n      return {\r\n        unitBeds,\r\n        totPages,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getReasonForDischarge() {\r\n    try {\r\n      const response = await axios.get(path + \"ui_uti_reason_for_discharge\");\r\n      const json = response.data.ui_uti_reason_for_discharge[0];\r\n\r\n      const predictedExits = {\r\n        homeCare: {\r\n          total: json.HOMECARE_UI + json.HOMECARE_UTI,\r\n          ui: json.HOMECARE_UI,\r\n          uti: json.HOMECARE_UTI,\r\n        },\r\n        obito: {\r\n          total: json.OBITO_UI + json.OBITO_UTI,\r\n          ui: json.OBITO_UI,\r\n          uti: json.OBITO_UTI,\r\n        },\r\n        externTransfer: {\r\n          total: json.TRANSFERENCIA_EXTERNA_UI + json.TRANSFERENCIA_EXTERNA_UTI,\r\n          ui: json.TRANSFERENCIA_EXTERNA_UI,\r\n          uti: json.TRANSFERENCIA_EXTERNA_UTI,\r\n        },\r\n        hospitalization: {\r\n          total: json.ALTA_HOSPITALAR_UI + json.ALTA_HOSPITALAR_UTI,\r\n          ui: json.ALTA_HOSPITALAR_UI,\r\n          uti: json.ALTA_HOSPITALAR_UTI,\r\n        },\r\n      };\r\n\r\n      return {\r\n        predictedExits\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getPatients(page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `ui_uti_source_and_destination_beds?page=${page}&limitItens=${limit}`);\r\n      const json = response.data.ui_uti_source_and_destination_beds;\r\n\r\n      const totalPage = json.totalPage;\r\n      const patients = json.result.map(({ NM_PACIENTE, DT_NASCIMENTO, LEITO_ANTERIOR, DS_LEITO }) => {\r\n        const splitedName = NM_PACIENTE?.split(\" \") || [\"\"];\r\n        const name = splitedName[0] + \" \" + splitedName[1] + \" \" + (splitedName[1]?.length <= 3 ? splitedName[2] : \"\");\r\n\r\n        return {\r\n          name,\r\n          DT_NASCIMENTO,\r\n          LEITO_ANTERIOR,\r\n          DS_LEITO\r\n        }\r\n      });\r\n\r\n      return {\r\n        patients,\r\n        totalPage,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getVacantOccupiedBeds() {\r\n    try {\r\n      const response = await axios.get(path + \"ui_uti_vacant_and_occupied_beds\");\r\n      const json = response.data.ui_uti_vacant_and_occupied_beds[0];\r\n\r\n      const vacantsAndOccupied = {\r\n        occupied: {\r\n          total: json.LEITOS_OCUPADOS_UI + json.LEITOS_OCUPADOS_UTI,\r\n          ui: json.LEITOS_OCUPADOS_UI,\r\n          uti: json.LEITOS_OCUPADOS_UTI,\r\n        },\r\n        vacants: {\r\n          total: json.LEITOS_VAGOS_UI + json.LEITOS_VAGOS_UTI,\r\n          ui: json.LEITOS_VAGOS_UI,\r\n          uti: json.LEITOS_VAGOS_UTI,\r\n        },\r\n      };\r\n\r\n      vacantsAndOccupied.total = vacantsAndOccupied.occupied.total + vacantsAndOccupied.vacants.total;\r\n\r\n      return {\r\n        vacantsAndOccupied\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getNeedVacancies() {\r\n    try {\r\n      const responseUTI = await axios.get(path + \"uti_need_for_vacancies\");\r\n      const responseUI = await axios.get(path + \"ui_need_for_vacancies\");\r\n\r\n      const ui = responseUI.data.ui_need_for_vacancies[0];\r\n      let uiTotal = 0;\r\n      if (!!ui) {\r\n        uiTotal = ui.PS_UI_HJ + ui.RESERVAS_UI_HJ + ui.UPP_UI_HJ;\r\n      };\r\n\r\n      const uti = responseUTI.data.uti_need_for_vacancies[0];\r\n      let utiTotal = 0;\r\n      if (!!uti) {\r\n        utiTotal = uti.PS_UTI_HJ + uti.RESERVAS_UTI_HJ + uti.UPP_UTI_HJ;\r\n      };\r\n\r\n      return {\r\n        ui: {\r\n          ...ui,\r\n          TOTAL: uiTotal,\r\n        },\r\n        uti: {\r\n          ...uti,\r\n          TOTAL: utiTotal,\r\n        }\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getInternalTransfer() {\r\n    try {\r\n      const response = await axios.get(path + \"ui_uti_internal_transfer\");\r\n      const json = response.data.ui_uti_internal_transfer;\r\n\r\n      const internalTransfer = {\r\n        total: 0,\r\n        ui: 0,\r\n        uti: 0,\r\n      }\r\n\r\n      json.forEach((transfer) => {\r\n        if (transfer.TIPO_TRANSFERENCIA === \"E TRANSFERENCIA UTI\") {\r\n          internalTransfer.total += transfer.QTD;\r\n          internalTransfer.uti += transfer.QTD;\r\n        } else if (transfer.TIPO_TRANSFERENCIA === \"E TRANSFERENCIA UI\") {\r\n          internalTransfer.total += transfer.QTD;\r\n          internalTransfer.ui += transfer.QTD;\r\n        }\r\n      });\r\n\r\n      return internalTransfer;\r\n\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getRequestDays() {\r\n    try {\r\n      const response = await axios.get(path + \"ui_uti_vacancies_requested_last_5_days\");\r\n      const json = response.data.ui_uti_vacancies_requested_last_5_days;\r\n\r\n      let onDay;\r\n      let fiveDays = [];\r\n\r\n      json.forEach(({ HR_SOLICITACAO, INTERNACAO_EM, DIA }) => {\r\n        if (DIA === \"HOJE\") {\r\n          onDay = {\r\n            day: HR_SOLICITACAO.slice(0, 5),\r\n            internations: INTERNACAO_EM,\r\n          };\r\n        } else {\r\n          fiveDays.unshift({\r\n            day: HR_SOLICITACAO.slice(0, 5),\r\n            internations: INTERNACAO_EM,\r\n          });\r\n        }\r\n      });\r\n\r\n      return {\r\n        onDay,\r\n        fiveDays\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getVacanciesPerFloor() {\r\n    try {\r\n      const response = await axios.get(path + \"vacancies_per_floor\");\r\n      const json = response.data.vacancies_per_floor;\r\n\r\n      return {\r\n        vacanciesPerFlor: json\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  return {\r\n    getUnities,\r\n    getBeds,\r\n    getReasonForDischarge,\r\n    getPatients,\r\n    getVacantOccupiedBeds,\r\n    getNeedVacancies,\r\n    getInternalTransfer,\r\n    getRequestDays,\r\n    getVacanciesPerFloor,\r\n  };\r\n}\r\n\r\nexport default useHDUIUTI;\r\n"]},"metadata":{},"sourceType":"module"}