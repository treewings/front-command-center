{"ast":null,"code":"import _toArray from\"/command-center/node_modules/@babel/runtime/helpers/esm/toArray.js\";import _asyncToGenerator from\"/command-center/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/command-center/node_modules/@babel/runtime/regenerator/index.js\";import{axios}from\"./api\";import{format,sub}from\"date-fns\";import ptBR from\"date-fns/locale/pt-BR\";import useUtilities from\"./useUtilities\";function calcPercent(small,larger){if(small>0&&larger>0){return Math.round(small/larger*100);}else{return 0;}}function useSupplyChange(){var path=\"/supply_change\";var pathWeeklyGoals=\"/weekly_goal\";var pathServiceTime=\"/service_time_analysis\";var pathInvoice=\"/purchase_order_with_and_without_invoice\";var pathPurchaseOrder=\"/authorized_purchase_order\";var pathPurchaseRequests=\"/open_and_completed_purchase_requests\";var pathTopItems=\"/top_10_requested_items\";var pathPurchaseItems=\"/foloow_up_weekly\";var pathListingItems=\"/stock_listing_items_abc_curve\";var pathStockItems=\"/stock_items_curve_abc\";var pathTotalStock=\"/total_stock\";var pathValidity=\"/validity_control_listing\";var pathTotalValidity=\"/total_stock_by_validity_control\";var pathValidityItems=\"/quantity_items_validity_control_abc\";var _useUtilities=useUtilities(),toBRL=_useUtilities.toBRL;function getWeeklyGoals(_x){return _getWeeklyGoals.apply(this,arguments);}function _getWeeklyGoals(){_getWeeklyGoals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(pattern){var response,weeklyGoals,_response$data$weekly,total_month,locked_month;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(path+pathWeeklyGoals+\"?pattern=\".concat(pattern));case 3:response=_context.sent;weeklyGoals=response.data.weekly_goal.result;_response$data$weekly=response.data.weekly_goal,total_month=_response$data$weekly.total_month,locked_month=_response$data$weekly.locked_month;return _context.abrupt(\"return\",{weeklyGoals:weeklyGoals,total_month:total_month,locked_month:locked_month});case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);throw new Error(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _getWeeklyGoals.apply(this,arguments);}function getSolicitationsMonth(_x2){return _getSolicitationsMonth.apply(this,arguments);}function _getSolicitationsMonth(){_getSolicitationsMonth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pattern){var response,json,solicitations;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(path+\"/total_opens_solic?pattern=\".concat(pattern));case 3:response=_context2.sent;json=response.data;solicitations=json.total_opens_solic[0];return _context2.abrupt(\"return\",{solicitations:solicitations});case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);throw new Error(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return _getSolicitationsMonth.apply(this,arguments);}function getServiceTime(_x3){return _getServiceTime.apply(this,arguments);}function _getServiceTime(){_getServiceTime=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pattern){var response,serviceTime;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(path+pathServiceTime+\"?pattern=\".concat(pattern));case 3:response=_context3.sent;serviceTime=response.data.service_time_analysis;return _context3.abrupt(\"return\",{serviceTime:serviceTime});case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);throw new Error(_context3.t0.message);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return _getServiceTime.apply(this,arguments);}function getInvoice(_x4){return _getInvoice.apply(this,arguments);}function _getInvoice(){_getInvoice=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pattern){var response,json,result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(path+pathInvoice+\"?pattern=\".concat(pattern));case 3:response=_context4.sent;json=response.data.purchase_order_with_and_without_invoice;result=json.reduce(function(acc,_ref){var TIPO=_ref.TIPO,QTD_ORDEM_COMPRAS=_ref.QTD_ORDEM_COMPRAS,VALOR_TOTAL=_ref.VALOR_TOTAL;if(TIPO===\"ATENDIDO\"){acc.quantityInvoice=QTD_ORDEM_COMPRAS;acc.totalInvoice=Math.round(VALOR_TOTAL);}else if(TIPO===\"PREVISTO\"){acc.quantityNoInvoice=QTD_ORDEM_COMPRAS;acc.totalNoInvoice=Math.round(VALOR_TOTAL);}acc.totalQuantity+=QTD_ORDEM_COMPRAS;acc.totalValue+=Math.round(VALOR_TOTAL);return acc;},{quantityInvoice:0,totalInvoice:0,quantityNoInvoice:0,totalNoInvoice:0,totalQuantity:0,totalValue:0});return _context4.abrupt(\"return\",{result:result});case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);throw new Error(_context4.t0.message);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return _getInvoice.apply(this,arguments);}function getPurchaseOrder(_x5){return _getPurchaseOrder.apply(this,arguments);}function _getPurchaseOrder(){_getPurchaseOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(pattern){var response,json,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(path+pathPurchaseOrder+\"?pattern=\".concat(pattern));case 3:response=_context5.sent;json=response.data.authorized_purchase_order;result=json.reduce(function(acc,_ref2){var SITUACAO=_ref2.SITUACAO,QTD_ORDEM_COMPRAS=_ref2.QTD_ORDEM_COMPRAS,VALOR_TOTAL=_ref2.VALOR_TOTAL;if(SITUACAO===\"AUTORIZADA\"){acc.quantityAuthorized=QTD_ORDEM_COMPRAS;acc.totalAuthorized=Math.round(VALOR_TOTAL);}else if(SITUACAO===\"PENDENTE AUTORIZACAO\"){acc.quantityNoAuthorized=QTD_ORDEM_COMPRAS;acc.totalNoAuthorized=Math.round(VALOR_TOTAL);}acc.totalQuantity+=QTD_ORDEM_COMPRAS;acc.totalValue+=Math.round(VALOR_TOTAL);return acc;},{quantityAuthorized:0,totalAuthorized:0,quantityNoAuthorized:0,totalNoAuthorized:0,totalQuantity:0,totalValue:0});return _context5.abrupt(\"return\",{result:result});case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);throw new Error(_context5.t0.message);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,9]]);}));return _getPurchaseOrder.apply(this,arguments);}function getPurchaseRequests(_x6){return _getPurchaseRequests.apply(this,arguments);}function _getPurchaseRequests(){_getPurchaseRequests=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(pattern){var response,json,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(path+pathPurchaseRequests+\"?pattern=\".concat(pattern));case 3:response=_context6.sent;json=response.data.open_and_completed_purchase_requests;result=json.reduce(function(acc,_ref3){var TIPO=_ref3.TIPO,QT_SOLIC=_ref3.QT_SOLIC,VL_TOTAL=_ref3.VL_TOTAL;if(TIPO===\"ABERTO\"){acc.quantityOpen=QT_SOLIC;acc.totalOpen=Math.round(VL_TOTAL);}else if(TIPO===\"FECHADO\"){acc.quantityDone=QT_SOLIC;acc.totalDone=Math.round(VL_TOTAL);}acc.quantityRequests+=QT_SOLIC;acc.totalValue+=Math.round(VL_TOTAL);return acc;},{quantityOpen:0,totalOpen:0,quantityDone:0,totalDone:0,quantityRequests:0,totalValue:0});return _context6.abrupt(\"return\",{result:result});case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](0);throw new Error(_context6.t0.message);case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[0,9]]);}));return _getPurchaseRequests.apply(this,arguments);}function getTopItems(_x7){return _getTopItems.apply(this,arguments);}function _getTopItems(){_getTopItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(pattern){var response,json,items,_items,firstRank,outerRanks;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.get(path+pathTopItems+\"?pattern=\".concat(pattern));case 3:response=_context7.sent;json=response.data.top_10_requested_items;items=json.map(function(_ref4){var RANK=_ref4.RANK,CD_PRODUTO=_ref4.CD_PRODUTO,DS_PRODUTO=_ref4.DS_PRODUTO,TOTAL_DE_SOLICITACOES=_ref4.TOTAL_DE_SOLICITACOES;return{cdProduct:CD_PRODUTO,rank:RANK.replace(\"o\",\"\"),describe:DS_PRODUTO,itemsRequested:TOTAL_DE_SOLICITACOES};});_items=_toArray(items),firstRank=_items[0],outerRanks=_items.slice(1);return _context7.abrupt(\"return\",{firstRank:firstRank,outerRanks:outerRanks});case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);throw new Error(_context7.t0.message);case 13:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return _getTopItems.apply(this,arguments);}function getPurchaseItems(){return _getPurchaseItems.apply(this,arguments);}function _getPurchaseItems(){_getPurchaseItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var response,_response$data$foloow,delivered,pending,total,unicSectors,percents,days,i,day,situations;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.get(path+pathPurchaseItems);case 3:response=_context8.sent;_response$data$foloow=response.data.foloow_up_weekly,delivered=_response$data$foloow.delivered,pending=_response$data$foloow.pending,total=_response$data$foloow.total;unicSectors=Array.from(new Set(total.map(function(_ref5){var DS_ESPECIE=_ref5.DS_ESPECIE;return DS_ESPECIE;})));percents=[];unicSectors.forEach(function(sector){var pending=0;var delivered=0;total.forEach(function(totalSector){if(sector===totalSector.DS_ESPECIE){if(totalSector.TIPO===\"PEND\"){pending+=totalSector.TOTAL_POR_ESPECIE;}else if(totalSector.TIPO===\"ENTREGUE\"){delivered+=totalSector.TOTAL_POR_ESPECIE;}}});percents.push({sector:sector,percent:calcPercent(delivered,delivered+pending)});});days=[];for(i=7;i>=1;i--){day=format(sub(new Date(),{years:0,months:0,weeks:0,days:i,hours:0,minutes:0,seconds:0}),\"EEEE\",{locale:ptBR});if(day===\"segunda-feira\"){days.push({title:\"SEG\",day:\"segunda\"});}else if(day===\"terça-feira\"){days.push({title:\"TER\",day:\"terça\"});}else if(day===\"quarta-feira\"){days.push({title:\"QUA\",day:\"quarta\"});}else if(day===\"quinta-feira\"){days.push({title:\"QUI\",day:\"quinta\"});}else if(day===\"sexta-feira\"){days.push({title:\"SEX\",day:\"sexta\"});}else if(day===\"sábado\"){days.push({title:\"SAB\",day:\"sábado\"});}else if(day===\"domingo\"){days.push({title:\"DOM\",day:\"domingo\"});}}situations=percents.map(function(_ref6){var sector=_ref6.sector,percent=_ref6.percent;return{name:sector,percent:percent,total:0,weeklys:days.map(function(_ref7){var day=_ref7.day,title=_ref7.title;return{day:day,title:title,delivered:0,pending:0};})};});pending.forEach(function(pending){situations.forEach(function(situation){if(situation.name===pending.DS_ESPECIE){situation.weeklys.forEach(function(value,i){if(value.title===pending.DIA_SEMANA){situation.weeklys[i].pending+=pending.QTD_DO_DIA;situation.total+=pending.QTD_DO_DIA;}});}});});delivered.forEach(function(delivered){situations.forEach(function(situation){if(situation.name===delivered.DS_ESPECIE){situation.weeklys.forEach(function(value,i){if(value.title===delivered.DIA_SEMANA){situation.weeklys[i].delivered+=delivered.QTD;}});}});});situations.forEach(function(situation,i){situation.weeklys.forEach(function(weekly,index){var _situations$i$weeklys;situations[i].weeklys[index].pending=weekly.pending+(((_situations$i$weeklys=situations[i].weeklys[index-1])===null||_situations$i$weeklys===void 0?void 0:_situations$i$weeklys.pending)||0);});});return _context8.abrupt(\"return\",{fallowUpWeekly:situations});case 17:_context8.prev=17;_context8.t0=_context8[\"catch\"](0);throw new Error(_context8.t0.message);case 20:case\"end\":return _context8.stop();}}},_callee8,null,[[0,17]]);}));return _getPurchaseItems.apply(this,arguments);}function getListingItems(_x8,_x9,_x10,_x11){return _getListingItems.apply(this,arguments);}function _getListingItems(){_getListingItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(pattern,page,limit,stock){var response,_response$data$stock_,totalPage,result,inventoryItems;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.get(path+pathListingItems+\"?pattern=\".concat(pattern,\"&page=\").concat(page,\"&limitItens=\").concat(limit,\"&stock=\").concat(stock));case 3:response=_context9.sent;_response$data$stock_=response.data.stock_listing_items_abc_curve,totalPage=_response$data$stock_.totalPage,result=_response$data$stock_.result;inventoryItems=result.map(function(_ref8){var DS_PRODUTO=_ref8.DS_PRODUTO,CD_PRODUTO=_ref8.CD_PRODUTO,QT_ESTOQUE_ATUAL=_ref8.QT_ESTOQUE_ATUAL;var description=DS_PRODUTO.split(\" \");return{CD_PRODUTO:CD_PRODUTO,DS_PRODUTO:description[0]+\" \"+(description[1]||\"\")+\" \"+(description[2]||\"\"),QT_ESTOQUE_ATUAL:QT_ESTOQUE_ATUAL};});return _context9.abrupt(\"return\",{totalPage:totalPage,inventoryItems:inventoryItems});case 9:_context9.prev=9;_context9.t0=_context9[\"catch\"](0);throw new Error(_context9.t0.message);case 12:case\"end\":return _context9.stop();}}},_callee9,null,[[0,9]]);}));return _getListingItems.apply(this,arguments);}function getStockItems(_x12,_x13){return _getStockItems.apply(this,arguments);}function _getStockItems(){_getStockItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(pattern,stock){var response,json,items;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return axios.get(path+pathStockItems+\"?pattern=\".concat(pattern,\"&stock=\").concat(stock));case 3:response=_context10.sent;json=response.data.stock_items_curve_abc;items=[{situation:\"1- CRITICO\",name:\"Crítico\",A:0,B:0,C:0},{situation:\"2- ATENCAO\",name:\"Atenção\",A:0,B:0,C:0},{situation:\"3- ABASTECIDO\",name:\"Abastecido\",A:0,B:0,C:0},{situation:\"4- EXCESSO\",name:\"Excesso\",A:0,B:0,C:0}];json.forEach(function(_ref9){var SITUACAO=_ref9.SITUACAO,TP_CLASSIFICACAO_ABC=_ref9.TP_CLASSIFICACAO_ABC,TOTAL=_ref9.TOTAL;items.forEach(function(item){if(SITUACAO===item.situation){if(TP_CLASSIFICACAO_ABC===\"A\"){item.A+=TOTAL;}else if(TP_CLASSIFICACAO_ABC===\"B\"){item.B+=TOTAL;}else if(TP_CLASSIFICACAO_ABC===\"C\"){item.C+=TOTAL;}}});});return _context10.abrupt(\"return\",{items:items});case 10:_context10.prev=10;_context10.t0=_context10[\"catch\"](0);throw new Error(_context10.t0.message);case 13:case\"end\":return _context10.stop();}}},_callee10,null,[[0,10]]);}));return _getStockItems.apply(this,arguments);}function getTotalStock(_x14,_x15){return _getTotalStock.apply(this,arguments);}function _getTotalStock(){_getTotalStock=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(pattern,stock){var response,json,value,stockValue;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return axios.get(path+pathTotalStock+\"?pattern=\".concat(pattern,\"&stock=\").concat(stock));case 3:response=_context11.sent;json=response.data.total_stock;value=(json===null||json===void 0?void 0:json.VALOR_ESTOQUE)||0;stockValue=toBRL(value);return _context11.abrupt(\"return\",{stockValue:stockValue});case 10:_context11.prev=10;_context11.t0=_context11[\"catch\"](0);throw new Error(_context11.t0.message);case 13:case\"end\":return _context11.stop();}}},_callee11,null,[[0,10]]);}));return _getTotalStock.apply(this,arguments);}function getTotalValidity(_x16,_x17){return _getTotalValidity.apply(this,arguments);}function _getTotalValidity(){_getTotalValidity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(pattern,stock){var response,json,value,validityValue;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return axios.get(path+pathTotalValidity+\"?pattern=\".concat(pattern,\"&stock=\").concat(stock));case 3:response=_context12.sent;json=response.data.total_stock_by_validity_control;value=(json===null||json===void 0?void 0:json.VALOR_ESTOQUE)||0;validityValue=toBRL(value);return _context12.abrupt(\"return\",{validityValue:validityValue});case 10:_context12.prev=10;_context12.t0=_context12[\"catch\"](0);throw new Error(_context12.t0.message);case 13:case\"end\":return _context12.stop();}}},_callee12,null,[[0,10]]);}));return _getTotalValidity.apply(this,arguments);}function getValidityListingItems(_x18,_x19,_x20,_x21){return _getValidityListingItems.apply(this,arguments);}function _getValidityListingItems(){_getValidityListingItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(pattern,page,limit,stock){var response,_response$data$validi,totalPage,result,validityItems;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.prev=0;_context13.next=3;return axios.get(path+pathValidity+\"?pattern=\".concat(pattern,\"&page=\").concat(page,\"&limitItens=\").concat(limit,\"&stock=\").concat(stock));case 3:response=_context13.sent;_response$data$validi=response.data.validity_control_listing,totalPage=_response$data$validi.totalPage,result=_response$data$validi.result;validityItems=result.map(function(_ref10){var DS_PRODUTO=_ref10.DS_PRODUTO,CD_PRODUTO=_ref10.CD_PRODUTO,QTD_LOTE=_ref10.QTD_LOTE;var description=DS_PRODUTO.split(\" \");return{CD_PRODUTO:CD_PRODUTO,DS_PRODUTO:description[0]+\" \"+(description[1]||\"\")+\" \"+(description[2]||\"\"),QTD_LOTE:QTD_LOTE};});return _context13.abrupt(\"return\",{totalPage:totalPage,validityItems:validityItems});case 9:_context13.prev=9;_context13.t0=_context13[\"catch\"](0);throw new Error(_context13.t0.message);case 12:case\"end\":return _context13.stop();}}},_callee13,null,[[0,9]]);}));return _getValidityListingItems.apply(this,arguments);}function getValidityItems(_x22,_x23){return _getValidityItems.apply(this,arguments);}function _getValidityItems(){_getValidityItems=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(pattern,stock){var response,json,items;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return axios.get(path+pathValidityItems+\"?pattern=\".concat(pattern,\"&stock=\").concat(stock));case 3:response=_context14.sent;json=response.data.quantity_items_validity_control_abc;items=[{situation:\"1- CRITICO\",name:\"Crítico\",A:{red:0,yellow:0,green:0},B:{red:0,yellow:0,green:0},C:{red:0,yellow:0,green:0}},{situation:\"2- ATENCAO\",name:\"Atenção\",A:{red:0,yellow:0,green:0},B:{red:0,yellow:0,green:0},C:{red:0,yellow:0,green:0}},{situation:\"3- ABASTECIDO\",name:\"Abastecido\",A:{red:0,yellow:0,green:0},B:{red:0,yellow:0,green:0},C:{red:0,yellow:0,green:0}},{situation:\"4- EXCESSO\",name:\"Excesso\",A:{red:0,yellow:0,green:0},B:{red:0,yellow:0,green:0},C:{red:0,yellow:0,green:0}}];json.forEach(function(_ref11){var SITUACAO=_ref11.SITUACAO,TP_CLASSIFICACAO_ABC=_ref11.TP_CLASSIFICACAO_ABC,TOTAL=_ref11.TOTAL,COR=_ref11.COR;items.forEach(function(item){if(SITUACAO===item.situation){if(TP_CLASSIFICACAO_ABC===\"A\"){if(COR.split(\" \")[1]===\"VERMELHO\"){item.A.red+=TOTAL;}else if(COR.split(\" \")[1]===\"AMARELO\"){item.A.yellow+=TOTAL;}else if(COR.split(\" \")[1]===\"VERDE\"){item.A.green+=TOTAL;}}else if(TP_CLASSIFICACAO_ABC===\"B\"){if(COR.split(\" \")[1]===\"VERMELHO\"){item.B.red+=TOTAL;}else if(COR.split(\" \")[1]===\"AMARELO\"){item.B.yellow+=TOTAL;}else if(COR.split(\" \")[1]===\"VERDE\"){item.B.green+=TOTAL;}}else if(TP_CLASSIFICACAO_ABC===\"C\"){if(COR.split(\" \")[1]===\"VERMELHO\"){item.C.red+=TOTAL;}else if(COR.split(\" \")[1]===\"AMARELO\"){item.C.yellow+=TOTAL;}else if(COR.split(\" \")[1]===\"VERDE\"){item.C.green+=TOTAL;}}}});});return _context14.abrupt(\"return\",{items:items});case 10:_context14.prev=10;_context14.t0=_context14[\"catch\"](0);throw new Error(_context14.t0.message);case 13:case\"end\":return _context14.stop();}}},_callee14,null,[[0,10]]);}));return _getValidityItems.apply(this,arguments);}function getStockFiveDays(_x24,_x25){return _getStockFiveDays.apply(this,arguments);}function _getStockFiveDays(){_getStockFiveDays=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(page,limit){var response,json,totalPage,days;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.prev=0;_context15.next=3;return axios.get(path+\"/stock_days_5d?page=\".concat(page,\"&limitItens=\").concat(limit));case 3:response=_context15.sent;json=response.data.stock_days_5d;totalPage=json.totalPage;days=json.result;return _context15.abrupt(\"return\",{totalPage:totalPage,days:days});case 10:_context15.prev=10;_context15.t0=_context15[\"catch\"](0);throw new Error(_context15.t0.message);case 13:case\"end\":return _context15.stop();}}},_callee15,null,[[0,10]]);}));return _getStockFiveDays.apply(this,arguments);}function getPendingRequests(_x26,_x27){return _getPendingRequests.apply(this,arguments);}function _getPendingRequests(){_getPendingRequests=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(page,limit){var response,json,totalPage,requests;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;_context16.next=3;return axios.get(path+\"/pending_requests?page=\".concat(page,\"&limitItens=\").concat(limit));case 3:response=_context16.sent;json=response.data.pending_requests;totalPage=json.totalPage;requests=json.result;return _context16.abrupt(\"return\",{totalPage:totalPage,requests:requests});case 10:_context16.prev=10;_context16.t0=_context16[\"catch\"](0);throw new Error(_context16.t0.message);case 13:case\"end\":return _context16.stop();}}},_callee16,null,[[0,10]]);}));return _getPendingRequests.apply(this,arguments);}function getItemsWithVariation(_x28,_x29){return _getItemsWithVariation.apply(this,arguments);}function _getItemsWithVariation(){_getItemsWithVariation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(page,limit){var response,json,totalPage,items;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.prev=0;_context17.next=3;return axios.get(path+\"/items_with_greater_variation?page=\".concat(page,\"&limitItens=\").concat(limit));case 3:response=_context17.sent;json=response.data.items_with_greater_variation;totalPage=json.totalPage;items=json.result;return _context17.abrupt(\"return\",{totalPage:totalPage,items:items});case 10:_context17.prev=10;_context17.t0=_context17[\"catch\"](0);throw new Error(_context17.t0.message);case 13:case\"end\":return _context17.stop();}}},_callee17,null,[[0,10]]);}));return _getItemsWithVariation.apply(this,arguments);}function getStockFilters(_x30,_x31){return _getStockFilters.apply(this,arguments);}function _getStockFilters(){_getStockFilters=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(page,limit){var response,filters;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.prev=0;_context18.next=3;return axios.get(path+\"/stock_filters?page=\".concat(page,\"&limitItens=\").concat(limit));case 3:response=_context18.sent;filters=response.data.stock_filters;return _context18.abrupt(\"return\",{filters:filters});case 8:_context18.prev=8;_context18.t0=_context18[\"catch\"](0);throw new Error(_context18.t0.message);case 11:case\"end\":return _context18.stop();}}},_callee18,null,[[0,8]]);}));return _getStockFilters.apply(this,arguments);}return{getWeeklyGoals:getWeeklyGoals,getSolicitationsMonth:getSolicitationsMonth,getServiceTime:getServiceTime,getInvoice:getInvoice,getPurchaseOrder:getPurchaseOrder,getPurchaseRequests:getPurchaseRequests,getTopItems:getTopItems,getPurchaseItems:getPurchaseItems,getListingItems:getListingItems,getStockItems:getStockItems,getTotalStock:getTotalStock,getValidityListingItems:getValidityListingItems,getTotalValidity:getTotalValidity,getValidityItems:getValidityItems,getStockFiveDays:getStockFiveDays,getPendingRequests:getPendingRequests,getItemsWithVariation:getItemsWithVariation,getStockFilters:getStockFilters};}export default useSupplyChange;","map":{"version":3,"sources":["/command-center/src/service/useSupplyChange.js"],"names":["axios","format","sub","ptBR","useUtilities","calcPercent","small","larger","Math","round","useSupplyChange","path","pathWeeklyGoals","pathServiceTime","pathInvoice","pathPurchaseOrder","pathPurchaseRequests","pathTopItems","pathPurchaseItems","pathListingItems","pathStockItems","pathTotalStock","pathValidity","pathTotalValidity","pathValidityItems","toBRL","getWeeklyGoals","pattern","get","response","weeklyGoals","data","weekly_goal","result","total_month","locked_month","Error","message","getSolicitationsMonth","json","solicitations","total_opens_solic","getServiceTime","serviceTime","service_time_analysis","getInvoice","purchase_order_with_and_without_invoice","reduce","acc","TIPO","QTD_ORDEM_COMPRAS","VALOR_TOTAL","quantityInvoice","totalInvoice","quantityNoInvoice","totalNoInvoice","totalQuantity","totalValue","getPurchaseOrder","authorized_purchase_order","SITUACAO","quantityAuthorized","totalAuthorized","quantityNoAuthorized","totalNoAuthorized","getPurchaseRequests","open_and_completed_purchase_requests","QT_SOLIC","VL_TOTAL","quantityOpen","totalOpen","quantityDone","totalDone","quantityRequests","getTopItems","top_10_requested_items","items","map","RANK","CD_PRODUTO","DS_PRODUTO","TOTAL_DE_SOLICITACOES","cdProduct","rank","replace","describe","itemsRequested","firstRank","outerRanks","getPurchaseItems","foloow_up_weekly","delivered","pending","total","unicSectors","Array","from","Set","DS_ESPECIE","percents","forEach","sector","totalSector","TOTAL_POR_ESPECIE","push","percent","days","i","day","Date","years","months","weeks","hours","minutes","seconds","locale","title","situations","name","weeklys","situation","value","DIA_SEMANA","QTD_DO_DIA","QTD","weekly","index","fallowUpWeekly","getListingItems","page","limit","stock","stock_listing_items_abc_curve","totalPage","inventoryItems","QT_ESTOQUE_ATUAL","description","split","getStockItems","stock_items_curve_abc","A","B","C","TP_CLASSIFICACAO_ABC","TOTAL","item","getTotalStock","total_stock","VALOR_ESTOQUE","stockValue","getTotalValidity","total_stock_by_validity_control","validityValue","getValidityListingItems","validity_control_listing","validityItems","QTD_LOTE","getValidityItems","quantity_items_validity_control_abc","red","yellow","green","COR","getStockFiveDays","stock_days_5d","getPendingRequests","pending_requests","requests","getItemsWithVariation","items_with_greater_variation","getStockFilters","filters","stock_filters"],"mappings":"sSAAA,OAASA,KAAT,KAAsB,OAAtB,CACA,OAASC,MAAT,CAAiBC,GAAjB,KAA4B,UAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CAEA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4BC,MAA5B,CAAoC,CAClC,GAAID,KAAK,CAAG,CAAR,EAAaC,MAAM,CAAG,CAA1B,CAA6B,CAC3B,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAaH,KAAK,CAAGC,MAAT,CAAmB,GAA/B,CAAP,CACD,CAFD,IAEO,CACL,MAAO,EAAP,CACD,CACF,CAED,QAASG,CAAAA,eAAT,EAA2B,CACzB,GAAMC,CAAAA,IAAI,CAAG,gBAAb,CACA,GAAMC,CAAAA,eAAe,CAAG,cAAxB,CACA,GAAMC,CAAAA,eAAe,CAAG,wBAAxB,CACA,GAAMC,CAAAA,WAAW,CAAG,0CAApB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,4BAA1B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,uCAA7B,CACA,GAAMC,CAAAA,YAAY,CAAG,yBAArB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,mBAA1B,CACA,GAAMC,CAAAA,gBAAgB,CAAG,gCAAzB,CACA,GAAMC,CAAAA,cAAc,CAAG,wBAAvB,CACA,GAAMC,CAAAA,cAAc,CAAG,cAAvB,CACA,GAAMC,CAAAA,YAAY,CAAG,2BAArB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,kCAA1B,CACA,GAAMC,CAAAA,iBAAiB,CAAG,sCAA1B,CACA,kBAAkBpB,YAAY,EAA9B,CAAQqB,KAAR,eAAQA,KAAR,CAfyB,QAiBVC,CAAAA,cAjBU,sJAiBzB,iBAA8BC,OAA9B,gOAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGC,eAAP,oBAAqCe,OAArC,CADqB,CAF3B,QAEUE,QAFV,eAKUC,WALV,CAKwBD,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BC,MALlD,uBAM0CJ,QAAQ,CAACE,IAAT,CAAcC,WANxD,CAMYE,WANZ,uBAMYA,WANZ,CAMyBC,YANzB,uBAMyBA,YANzB,iCAOW,CAAEL,WAAW,CAAXA,WAAF,CAAeI,WAAW,CAAXA,WAAf,CAA4BC,YAAY,CAAZA,YAA5B,CAPX,+DASU,IAAIC,CAAAA,KAAJ,CAAU,YAAMC,OAAhB,CATV,qEAjByB,yDA8BVC,CAAAA,qBA9BU,4KA8BzB,kBAAqCX,OAArC,8LAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,sCAAiCgB,OAAjC,CADiB,CAF3B,QAEUE,QAFV,gBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAL1B,CAMUS,aANV,CAM0BD,IAAI,CAACE,iBAAL,CAAuB,CAAvB,CAN1B,kCAQW,CAAED,aAAa,CAAbA,aAAF,CARX,kEAUU,IAAIJ,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAVV,uEA9ByB,gEA4CVK,CAAAA,cA5CU,uJA4CzB,kBAA8Bf,OAA9B,uLAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGE,eAAP,oBAAqCc,OAArC,CADqB,CAF3B,QAEUE,QAFV,gBAKUc,WALV,CAKwBd,QAAQ,CAACE,IAAT,CAAca,qBALtC,kCAMW,CAAED,WAAW,CAAXA,WAAF,CANX,kEAQU,IAAIP,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CARV,uEA5CyB,yDAwDVQ,CAAAA,UAxDU,2IAwDzB,kBAA0BlB,OAA1B,uLAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGG,WAAP,oBAAiCa,OAAjC,CADqB,CAF3B,QAEUE,QAFV,gBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAce,uCAL/B,CAMUb,MANV,CAMmBM,IAAI,CAACQ,MAAL,CACb,SAACC,GAAD,MAAmD,IAA3CC,CAAAA,IAA2C,MAA3CA,IAA2C,CAArCC,iBAAqC,MAArCA,iBAAqC,CAAlBC,WAAkB,MAAlBA,WAAkB,CACjD,GAAIF,IAAI,GAAK,UAAb,CAAyB,CACvBD,GAAG,CAACI,eAAJ,CAAsBF,iBAAtB,CACAF,GAAG,CAACK,YAAJ,CAAmB7C,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAAnB,CACD,CAHD,IAGO,IAAIF,IAAI,GAAK,UAAb,CAAyB,CAC9BD,GAAG,CAACM,iBAAJ,CAAwBJ,iBAAxB,CACAF,GAAG,CAACO,cAAJ,CAAqB/C,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAArB,CACD,CAEDH,GAAG,CAACQ,aAAJ,EAAqBN,iBAArB,CACAF,GAAG,CAACS,UAAJ,EAAkBjD,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAAlB,CAEA,MAAOH,CAAAA,GAAP,CACD,CAdY,CAeb,CACEI,eAAe,CAAE,CADnB,CAEEC,YAAY,CAAE,CAFhB,CAGEC,iBAAiB,CAAE,CAHrB,CAIEC,cAAc,CAAE,CAJlB,CAKEC,aAAa,CAAE,CALjB,CAMEC,UAAU,CAAE,CANd,CAfa,CANnB,kCA8BW,CACLxB,MAAM,CAANA,MADK,CA9BX,kEAkCU,IAAIG,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAlCV,uEAxDyB,qDA8FVqB,CAAAA,gBA9FU,6JA8FzB,kBAAgC/B,OAAhC,uLAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGI,iBAAP,oBAAuCY,OAAvC,CADqB,CAF3B,QAEUE,QAFV,gBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAc4B,yBAL/B,CAMU1B,MANV,CAMmBM,IAAI,CAACQ,MAAL,CAAY,SAACC,GAAD,OAAuD,IAA/CY,CAAAA,QAA+C,OAA/CA,QAA+C,CAArCV,iBAAqC,OAArCA,iBAAqC,CAAlBC,WAAkB,OAAlBA,WAAkB,CAChF,GAAIS,QAAQ,GAAK,YAAjB,CAA+B,CAC7BZ,GAAG,CAACa,kBAAJ,CAAyBX,iBAAzB,CACAF,GAAG,CAACc,eAAJ,CAAsBtD,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAAtB,CACD,CAHD,IAGO,IAAIS,QAAQ,GAAK,sBAAjB,CAAyC,CAC9CZ,GAAG,CAACe,oBAAJ,CAA2Bb,iBAA3B,CACAF,GAAG,CAACgB,iBAAJ,CAAwBxD,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAAxB,CACD,CAEDH,GAAG,CAACQ,aAAJ,EAAqBN,iBAArB,CACAF,GAAG,CAACS,UAAJ,EAAkBjD,IAAI,CAACC,KAAL,CAAW0C,WAAX,CAAlB,CAEA,MAAOH,CAAAA,GAAP,CACD,CAbc,CAcb,CACEa,kBAAkB,CAAE,CADtB,CAEEC,eAAe,CAAE,CAFnB,CAGEC,oBAAoB,CAAE,CAHxB,CAIEC,iBAAiB,CAAE,CAJrB,CAKER,aAAa,CAAE,CALjB,CAMEC,UAAU,CAAE,CANd,CAda,CANnB,kCA8BW,CACLxB,MAAM,CAANA,MADK,CA9BX,kEAkCU,IAAIG,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAlCV,uEA9FyB,2DAoIV4B,CAAAA,mBApIU,sKAoIzB,kBAAmCtC,OAAnC,uLAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGK,oBAAP,oBAA0CW,OAA1C,CADqB,CAF3B,QAEUE,QAFV,gBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAcmC,oCAL/B,CAMUjC,MANV,CAMmBM,IAAI,CAACQ,MAAL,CACb,SAACC,GAAD,OAAuC,IAA/BC,CAAAA,IAA+B,OAA/BA,IAA+B,CAAzBkB,QAAyB,OAAzBA,QAAyB,CAAfC,QAAe,OAAfA,QAAe,CACrC,GAAInB,IAAI,GAAK,QAAb,CAAuB,CACrBD,GAAG,CAACqB,YAAJ,CAAmBF,QAAnB,CACAnB,GAAG,CAACsB,SAAJ,CAAgB9D,IAAI,CAACC,KAAL,CAAW2D,QAAX,CAAhB,CACD,CAHD,IAGO,IAAInB,IAAI,GAAK,SAAb,CAAwB,CAC7BD,GAAG,CAACuB,YAAJ,CAAmBJ,QAAnB,CACAnB,GAAG,CAACwB,SAAJ,CAAgBhE,IAAI,CAACC,KAAL,CAAW2D,QAAX,CAAhB,CACD,CAEDpB,GAAG,CAACyB,gBAAJ,EAAwBN,QAAxB,CACAnB,GAAG,CAACS,UAAJ,EAAkBjD,IAAI,CAACC,KAAL,CAAW2D,QAAX,CAAlB,CAEA,MAAOpB,CAAAA,GAAP,CACD,CAdY,CAeb,CACEqB,YAAY,CAAE,CADhB,CAEEC,SAAS,CAAE,CAFb,CAGEC,YAAY,CAAE,CAHhB,CAIEC,SAAS,CAAE,CAJb,CAKEC,gBAAgB,CAAE,CALpB,CAMEhB,UAAU,CAAE,CANd,CAfa,CANnB,kCA8BW,CACLxB,MAAM,CAANA,MADK,CA9BX,kEAkCU,IAAIG,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAlCV,uEApIyB,8DA0KVqC,CAAAA,WA1KU,8IA0KzB,kBAA2B/C,OAA3B,kNAE2B3B,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGM,YAAP,oBAAkCU,OAAlC,CADqB,CAF3B,QAEUE,QAFV,gBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAc4C,sBAL/B,CAMUC,KANV,CAMkBrC,IAAI,CAACsC,GAAL,CACZ,mBAAGC,CAAAA,IAAH,OAAGA,IAAH,CAASC,UAAT,OAASA,UAAT,CAAqBC,UAArB,OAAqBA,UAArB,CAAiCC,qBAAjC,OAAiCA,qBAAjC,OAA8D,CAC5DC,SAAS,CAAEH,UADiD,CAE5DI,IAAI,CAAEL,IAAI,CAACM,OAAL,CAAa,GAAb,CAAkB,EAAlB,CAFsD,CAG5DC,QAAQ,CAAEL,UAHkD,CAI5DM,cAAc,CAAEL,qBAJ4C,CAA9D,EADY,CANlB,iBAcuCL,KAdvC,EAcWW,SAdX,WAcyBC,UAdzB,kDAeW,CAAED,SAAS,CAATA,SAAF,CAAaC,UAAU,CAAVA,UAAb,CAfX,oEAiBU,IAAIpD,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAjBV,wEA1KyB,sDA+LVoD,CAAAA,gBA/LU,0JA+LzB,sRAE2BzF,CAAAA,KAAK,CAAC4B,GAAN,CAAUjB,IAAI,CAAGO,iBAAjB,CAF3B,QAEUW,QAFV,sCAG0CA,QAAQ,CAACE,IAAT,CAAc2D,gBAHxD,CAGYC,SAHZ,uBAGYA,SAHZ,CAGuBC,OAHvB,uBAGuBA,OAHvB,CAGgCC,KAHhC,uBAGgCA,KAHhC,CAKUC,WALV,CAKwBC,KAAK,CAACC,IAAN,CAAW,GAAIC,CAAAA,GAAJ,CAAQJ,KAAK,CAAChB,GAAN,CAAU,mBAAGqB,CAAAA,UAAH,OAAGA,UAAH,OAAoBA,CAAAA,UAApB,EAAV,CAAR,CAAX,CALxB,CAOUC,QAPV,CAOqB,EAPrB,CAQIL,WAAW,CAACM,OAAZ,CAAoB,SAACC,MAAD,CAAY,CAC9B,GAAIT,CAAAA,OAAO,CAAG,CAAd,CACA,GAAID,CAAAA,SAAS,CAAG,CAAhB,CAEAE,KAAK,CAACO,OAAN,CAAc,SAACE,WAAD,CAAiB,CAC7B,GAAID,MAAM,GAAKC,WAAW,CAACJ,UAA3B,CAAuC,CACrC,GAAII,WAAW,CAACrD,IAAZ,GAAqB,MAAzB,CAAiC,CAC/B2C,OAAO,EAAIU,WAAW,CAACC,iBAAvB,CACD,CAFD,IAEO,IAAID,WAAW,CAACrD,IAAZ,GAAqB,UAAzB,CAAqC,CAC1C0C,SAAS,EAAIW,WAAW,CAACC,iBAAzB,CACD,CACF,CACF,CARD,EAUAJ,QAAQ,CAACK,IAAT,CAAc,CACZH,MAAM,CAANA,MADY,CAEZI,OAAO,CAAEpG,WAAW,CAACsF,SAAD,CAAYA,SAAS,CAAGC,OAAxB,CAFR,CAAd,EAID,CAlBD,EAoBMc,IA5BV,CA4BiB,EA5BjB,CA8BI,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,EAAI,CAArB,CAAwBA,CAAC,EAAzB,CAA6B,CACrBC,GADqB,CACf3G,MAAM,CAACC,GAAG,CAAC,GAAI2G,CAAAA,IAAJ,EAAD,CAAa,CACjCC,KAAK,CAAE,CAD0B,CAEjCC,MAAM,CAAE,CAFyB,CAGjCC,KAAK,CAAE,CAH0B,CAIjCN,IAAI,CAAEC,CAJ2B,CAKjCM,KAAK,CAAE,CAL0B,CAMjCC,OAAO,CAAE,CANwB,CAOjCC,OAAO,CAAE,CAPwB,CAAb,CAAJ,CAQd,MARc,CAQN,CAAEC,MAAM,CAAEjH,IAAV,CARM,CADS,CAW3B,GAAIyG,GAAG,GAAK,eAAZ,CAA6B,CAC3BF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,SAFG,CAAV,EAID,CALD,IAKO,IAAIA,GAAG,GAAK,aAAZ,CAA2B,CAChCF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,OAFG,CAAV,EAID,CALM,IAKA,IAAIA,GAAG,GAAK,cAAZ,CAA4B,CACjCF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,QAFG,CAAV,EAID,CALM,IAKA,IAAIA,GAAG,GAAK,cAAZ,CAA4B,CACjCF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,QAFG,CAAV,EAID,CALM,IAKA,IAAIA,GAAG,GAAK,aAAZ,CAA2B,CAChCF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,OAFG,CAAV,EAID,CALM,IAKA,IAAIA,GAAG,GAAK,QAAZ,CAAsB,CAC3BF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,QAFG,CAAV,EAID,CALM,IAKA,IAAIA,GAAG,GAAK,SAAZ,CAAuB,CAC5BF,IAAI,CAACF,IAAL,CAAU,CACRa,KAAK,CAAE,KADC,CAERT,GAAG,CAAE,SAFG,CAAV,EAID,CACF,CAEKU,UA/EV,CA+EuBnB,QAAQ,CAACtB,GAAT,CAAa,mBAAGwB,CAAAA,MAAH,OAAGA,MAAH,CAAWI,OAAX,OAAWA,OAAX,OAA0B,CACxDc,IAAI,CAAElB,MADkD,CAExDI,OAAO,CAAPA,OAFwD,CAGxDZ,KAAK,CAAE,CAHiD,CAIxD2B,OAAO,CAAEd,IAAI,CAAC7B,GAAL,CAAS,mBAAG+B,CAAAA,GAAH,OAAGA,GAAH,CAAQS,KAAR,OAAQA,KAAR,OAAqB,CACrCT,GAAG,CAAHA,GADqC,CAErCS,KAAK,CAALA,KAFqC,CAGrC1B,SAAS,CAAE,CAH0B,CAIrCC,OAAO,CAAE,CAJ4B,CAArB,EAAT,CAJ+C,CAA1B,EAAb,CA/EvB,CA2FIA,OAAO,CAACQ,OAAR,CAAgB,SAACR,OAAD,CAAa,CAC3B0B,UAAU,CAAClB,OAAX,CAAmB,SAACqB,SAAD,CAAe,CAChC,GAAIA,SAAS,CAACF,IAAV,GAAmB3B,OAAO,CAACM,UAA/B,CAA2C,CACzCuB,SAAS,CAACD,OAAV,CAAkBpB,OAAlB,CAA0B,SAACsB,KAAD,CAAQf,CAAR,CAAc,CACtC,GAAIe,KAAK,CAACL,KAAN,GAAgBzB,OAAO,CAAC+B,UAA5B,CAAwC,CACtCF,SAAS,CAACD,OAAV,CAAkBb,CAAlB,EAAqBf,OAArB,EAAgCA,OAAO,CAACgC,UAAxC,CACAH,SAAS,CAAC5B,KAAV,EAAmBD,OAAO,CAACgC,UAA3B,CACD,CACF,CALD,EAMD,CACF,CATD,EAUD,CAXD,EAaAjC,SAAS,CAACS,OAAV,CAAkB,SAACT,SAAD,CAAe,CAC/B2B,UAAU,CAAClB,OAAX,CAAmB,SAACqB,SAAD,CAAe,CAChC,GAAIA,SAAS,CAACF,IAAV,GAAmB5B,SAAS,CAACO,UAAjC,CAA6C,CAC3CuB,SAAS,CAACD,OAAV,CAAkBpB,OAAlB,CAA0B,SAACsB,KAAD,CAAQf,CAAR,CAAc,CACtC,GAAIe,KAAK,CAACL,KAAN,GAAgB1B,SAAS,CAACgC,UAA9B,CAA0C,CACxCF,SAAS,CAACD,OAAV,CAAkBb,CAAlB,EAAqBhB,SAArB,EAAkCA,SAAS,CAACkC,GAA5C,CACD,CACF,CAJD,EAKD,CACF,CARD,EASD,CAVD,EAYAP,UAAU,CAAClB,OAAX,CAAmB,SAACqB,SAAD,CAAYd,CAAZ,CAAkB,CACnCc,SAAS,CAACD,OAAV,CAAkBpB,OAAlB,CAA0B,SAAC0B,MAAD,CAASC,KAAT,CAAmB,2BAC3CT,UAAU,CAACX,CAAD,CAAV,CAAca,OAAd,CAAsBO,KAAtB,EAA6BnC,OAA7B,CAAuCkC,MAAM,CAAClC,OAAP,EAAkB,wBAAA0B,UAAU,CAACX,CAAD,CAAV,CAAca,OAAd,CAAsBO,KAAK,CAAG,CAA9B,uEAAkCnC,OAAlC,GAA6C,CAA/D,CAAvC,CACD,CAFD,EAGD,CAJD,EApHJ,iCA0HW,CAAEoC,cAAc,CAAEV,UAAlB,CA1HX,oEA4HU,IAAIlF,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CA5HV,wEA/LyB,2DA+TV4F,CAAAA,eA/TU,wKA+TzB,kBAA+BtG,OAA/B,CAAwCuG,IAAxC,CAA8CC,KAA9C,CAAqDC,KAArD,iOAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGQ,gBAAP,oBAAsCQ,OAAtC,kBAAsDuG,IAAtD,wBAAyEC,KAAzE,mBAAwFC,KAAxF,CADqB,CAF3B,QAEUvG,QAFV,sCAKkCA,QAAQ,CAACE,IAAT,CAAcsG,6BALhD,CAKYC,SALZ,uBAKYA,SALZ,CAKuBrG,MALvB,uBAKuBA,MALvB,CAOUsG,cAPV,CAO2BtG,MAAM,CAAC4C,GAAP,CAAW,eAAkD,IAA/CG,CAAAA,UAA+C,OAA/CA,UAA+C,CAAnCD,UAAmC,OAAnCA,UAAmC,CAAvByD,gBAAuB,OAAvBA,gBAAuB,CAClF,GAAMC,CAAAA,WAAW,CAAGzD,UAAU,CAAC0D,KAAX,CAAiB,GAAjB,CAApB,CACA,MAAO,CACL3D,UAAU,CAAVA,UADK,CAELC,UAAU,CAAEyD,WAAW,CAAC,CAAD,CAAX,CAAiB,GAAjB,EAAwBA,WAAW,CAAC,CAAD,CAAX,EAAkB,EAA1C,EAAgD,GAAhD,EAAuDA,WAAW,CAAC,CAAD,CAAX,EAAkB,EAAzE,CAFP,CAGLD,gBAAgB,CAAhBA,gBAHK,CAAP,CAKD,CAPsB,CAP3B,kCAgBW,CAAEF,SAAS,CAATA,SAAF,CAAaC,cAAc,CAAdA,cAAb,CAhBX,kEAkBU,IAAInG,CAAAA,KAAJ,CAAU,aAAMC,OAAhB,CAlBV,uEA/TyB,0DAqVVsG,CAAAA,aArVU,0JAqVzB,mBAA6BhH,OAA7B,CAAsCyG,KAAtC,4LAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGS,cAAP,oBAAoCO,OAApC,mBAAqDyG,KAArD,CADqB,CAF3B,QAEUvG,QAFV,iBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAc6G,qBAL/B,CAOUhE,KAPV,CAOkB,CACZ,CAAE6C,SAAS,CAAE,YAAb,CAA2BF,IAAI,CAAE,SAAjC,CAA4CsB,CAAC,CAAE,CAA/C,CAAkDC,CAAC,CAAE,CAArD,CAAwDC,CAAC,CAAE,CAA3D,CADY,CAEZ,CAAEtB,SAAS,CAAE,YAAb,CAA2BF,IAAI,CAAE,SAAjC,CAA4CsB,CAAC,CAAE,CAA/C,CAAkDC,CAAC,CAAE,CAArD,CAAwDC,CAAC,CAAE,CAA3D,CAFY,CAGZ,CAAEtB,SAAS,CAAE,eAAb,CAA8BF,IAAI,CAAE,YAApC,CAAkDsB,CAAC,CAAE,CAArD,CAAwDC,CAAC,CAAE,CAA3D,CAA8DC,CAAC,CAAE,CAAjE,CAHY,CAIZ,CAAEtB,SAAS,CAAE,YAAb,CAA2BF,IAAI,CAAE,SAAjC,CAA4CsB,CAAC,CAAE,CAA/C,CAAkDC,CAAC,CAAE,CAArD,CAAwDC,CAAC,CAAE,CAA3D,CAJY,CAPlB,CAcIxG,IAAI,CAAC6D,OAAL,CAAa,eAA+C,IAA5CxC,CAAAA,QAA4C,OAA5CA,QAA4C,CAAlCoF,oBAAkC,OAAlCA,oBAAkC,CAAZC,KAAY,OAAZA,KAAY,CAC1DrE,KAAK,CAACwB,OAAN,CAAc,SAAC8C,IAAD,CAAU,CACtB,GAAItF,QAAQ,GAAKsF,IAAI,CAACzB,SAAtB,CAAiC,CAC/B,GAAIuB,oBAAoB,GAAK,GAA7B,CAAkC,CAChCE,IAAI,CAACL,CAAL,EAAUI,KAAV,CACD,CAFD,IAEO,IAAID,oBAAoB,GAAK,GAA7B,CAAkC,CACvCE,IAAI,CAACJ,CAAL,EAAUG,KAAV,CACD,CAFM,IAEA,IAAID,oBAAoB,GAAK,GAA7B,CAAkC,CACvCE,IAAI,CAACH,CAAL,EAAUE,KAAV,CACD,CACF,CACF,CAVD,EAWD,CAZD,EAdJ,kCA4BW,CAAErE,KAAK,CAALA,KAAF,CA5BX,uEA8BU,IAAIxC,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CA9BV,0EArVyB,wDAuXV8G,CAAAA,aAvXU,0JAuXzB,mBAA6BxH,OAA7B,CAAsCyG,KAAtC,uMAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGU,cAAP,oBAAoCM,OAApC,mBAAqDyG,KAArD,CADqB,CAF3B,QAEUvG,QAFV,iBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAcqH,WAL/B,CAMU1B,KANV,CAMkB,CAAAnF,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAE8G,aAAN,GAAuB,CANzC,CAOUC,UAPV,CAOuB7H,KAAK,CAACiG,KAAD,CAP5B,mCASW,CAAE4B,UAAU,CAAVA,UAAF,CATX,uEAWU,IAAIlH,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAXV,0EAvXyB,wDAsYVkH,CAAAA,gBAtYU,mKAsYzB,mBAAgC5H,OAAhC,CAAyCyG,KAAzC,0MAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGY,iBAAP,oBAAuCI,OAAvC,mBAAwDyG,KAAxD,CADqB,CAF3B,QAEUvG,QAFV,iBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAcyH,+BAL/B,CAMU9B,KANV,CAMkB,CAAAnF,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAE8G,aAAN,GAAuB,CANzC,CAOUI,aAPV,CAO0BhI,KAAK,CAACiG,KAAD,CAP/B,mCASW,CAAE+B,aAAa,CAAbA,aAAF,CATX,uEAWU,IAAIrH,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAXV,0EAtYyB,2DAqZVqH,CAAAA,uBArZU,kMAqZzB,mBAAuC/H,OAAvC,CAAgDuG,IAAhD,CAAsDC,KAAtD,CAA6DC,KAA7D,sOAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGW,YAAP,oBAAkCK,OAAlC,kBAAkDuG,IAAlD,wBAAqEC,KAArE,mBAAoFC,KAApF,CADqB,CAF3B,QAEUvG,QAFV,uCAKkCA,QAAQ,CAACE,IAAT,CAAc4H,wBALhD,CAKYrB,SALZ,uBAKYA,SALZ,CAKuBrG,MALvB,uBAKuBA,MALvB,CAOU2H,aAPV,CAO0B3H,MAAM,CAAC4C,GAAP,CAAW,gBAA0C,IAAvCG,CAAAA,UAAuC,QAAvCA,UAAuC,CAA3BD,UAA2B,QAA3BA,UAA2B,CAAf8E,QAAe,QAAfA,QAAe,CACzE,GAAMpB,CAAAA,WAAW,CAAGzD,UAAU,CAAC0D,KAAX,CAAiB,GAAjB,CAApB,CACA,MAAO,CACL3D,UAAU,CAAVA,UADK,CAELC,UAAU,CAAEyD,WAAW,CAAC,CAAD,CAAX,CAAiB,GAAjB,EAAwBA,WAAW,CAAC,CAAD,CAAX,EAAkB,EAA1C,EAAgD,GAAhD,EAAuDA,WAAW,CAAC,CAAD,CAAX,EAAkB,EAAzE,CAFP,CAGLoB,QAAQ,CAARA,QAHK,CAAP,CAKD,CAPqB,CAP1B,mCAgBW,CAAEvB,SAAS,CAATA,SAAF,CAAasB,aAAa,CAAbA,aAAb,CAhBX,qEAkBU,IAAIxH,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAlBV,yEArZyB,kEA2aVyH,CAAAA,gBA3aU,mKA2azB,mBAAgCnI,OAAhC,CAAyCyG,KAAzC,4LAE2BpI,CAAAA,KAAK,CAAC4B,GAAN,CACrBjB,IAAI,CAAGa,iBAAP,oBAAuCG,OAAvC,mBAAwDyG,KAAxD,CADqB,CAF3B,QAEUvG,QAFV,iBAKUU,IALV,CAKiBV,QAAQ,CAACE,IAAT,CAAcgI,mCAL/B,CAOUnF,KAPV,CAOkB,CACZ,CACE6C,SAAS,CAAE,YADb,CAEEF,IAAI,CAAE,SAFR,CAGEsB,CAAC,CAAE,CAAEmB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAHL,CAIEpB,CAAC,CAAE,CAAEkB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAJL,CAKEnB,CAAC,CAAE,CAAEiB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CALL,CADY,CAQZ,CACEzC,SAAS,CAAE,YADb,CAEEF,IAAI,CAAE,SAFR,CAGEsB,CAAC,CAAE,CAAEmB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAHL,CAIEpB,CAAC,CAAE,CAAEkB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAJL,CAKEnB,CAAC,CAAE,CAAEiB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CALL,CARY,CAeZ,CACEzC,SAAS,CAAE,eADb,CAEEF,IAAI,CAAE,YAFR,CAGEsB,CAAC,CAAE,CAAEmB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAHL,CAIEpB,CAAC,CAAE,CAAEkB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAJL,CAKEnB,CAAC,CAAE,CAAEiB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CALL,CAfY,CAsBZ,CACEzC,SAAS,CAAE,YADb,CAEEF,IAAI,CAAE,SAFR,CAGEsB,CAAC,CAAE,CAAEmB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAHL,CAIEpB,CAAC,CAAE,CAAEkB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CAJL,CAKEnB,CAAC,CAAE,CAAEiB,GAAG,CAAE,CAAP,CAAUC,MAAM,CAAE,CAAlB,CAAqBC,KAAK,CAAE,CAA5B,CALL,CAtBY,CAPlB,CAsCI3H,IAAI,CAAC6D,OAAL,CAAa,gBAAoD,IAAjDxC,CAAAA,QAAiD,QAAjDA,QAAiD,CAAvCoF,oBAAuC,QAAvCA,oBAAuC,CAAjBC,KAAiB,QAAjBA,KAAiB,CAAVkB,GAAU,QAAVA,GAAU,CAC/DvF,KAAK,CAACwB,OAAN,CAAc,SAAC8C,IAAD,CAAU,CACtB,GAAItF,QAAQ,GAAKsF,IAAI,CAACzB,SAAtB,CAAiC,CAC/B,GAAIuB,oBAAoB,GAAK,GAA7B,CAAkC,CAChC,GAAImB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,UAA1B,CAAsC,CACpCQ,IAAI,CAACL,CAAL,CAAOmB,GAAP,EAAcf,KAAd,CACD,CAFD,IAEO,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,SAA1B,CAAqC,CAC1CQ,IAAI,CAACL,CAAL,CAAOoB,MAAP,EAAiBhB,KAAjB,CACD,CAFM,IAEA,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,OAA1B,CAAmC,CACxCQ,IAAI,CAACL,CAAL,CAAOqB,KAAP,EAAgBjB,KAAhB,CACD,CACF,CARD,IAQO,IAAID,oBAAoB,GAAK,GAA7B,CAAkC,CACvC,GAAImB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,UAA1B,CAAsC,CACpCQ,IAAI,CAACJ,CAAL,CAAOkB,GAAP,EAAcf,KAAd,CACD,CAFD,IAEO,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,SAA1B,CAAqC,CAC1CQ,IAAI,CAACJ,CAAL,CAAOmB,MAAP,EAAiBhB,KAAjB,CACD,CAFM,IAEA,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,OAA1B,CAAmC,CACxCQ,IAAI,CAACJ,CAAL,CAAOoB,KAAP,EAAgBjB,KAAhB,CACD,CACF,CARM,IAQA,IAAID,oBAAoB,GAAK,GAA7B,CAAkC,CACvC,GAAImB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,UAA1B,CAAsC,CACpCQ,IAAI,CAACH,CAAL,CAAOiB,GAAP,EAAcf,KAAd,CACD,CAFD,IAEO,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,SAA1B,CAAqC,CAC1CQ,IAAI,CAACH,CAAL,CAAOkB,MAAP,EAAiBhB,KAAjB,CACD,CAFM,IAEA,IAAIkB,GAAG,CAACzB,KAAJ,CAAU,GAAV,EAAe,CAAf,IAAsB,OAA1B,CAAmC,CACxCQ,IAAI,CAACH,CAAL,CAAOmB,KAAP,EAAgBjB,KAAhB,CACD,CACF,CACF,CACF,CA5BD,EA6BD,CA9BD,EAtCJ,kCAsEW,CAAErE,KAAK,CAALA,KAAF,CAtEX,uEAwEU,IAAIxC,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAxEV,0EA3ayB,2DAufV+H,CAAAA,gBAvfU,mKAufzB,mBAAgClC,IAAhC,CAAsCC,KAAtC,qMAE2BnI,CAAAA,KAAK,CAAC4B,GAAN,CAAUjB,IAAI,+BAA0BuH,IAA1B,wBAA6CC,KAA7C,CAAd,CAF3B,QAEUtG,QAFV,iBAGUU,IAHV,CAGiBV,QAAQ,CAACE,IAAT,CAAcsI,aAH/B,CAKU/B,SALV,CAKsB/F,IAAI,CAAC+F,SAL3B,CAMU5B,IANV,CAMiBnE,IAAI,CAACN,MANtB,mCAQW,CACLqG,SAAS,CAATA,SADK,CAEL5B,IAAI,CAAJA,IAFK,CARX,uEAaU,IAAItE,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAbV,0EAvfyB,2DAwgBViI,CAAAA,kBAxgBU,yKAwgBzB,mBAAkCpC,IAAlC,CAAwCC,KAAxC,yMAE2BnI,CAAAA,KAAK,CAAC4B,GAAN,CAAUjB,IAAI,kCAA6BuH,IAA7B,wBAAgDC,KAAhD,CAAd,CAF3B,QAEUtG,QAFV,iBAGUU,IAHV,CAGiBV,QAAQ,CAACE,IAAT,CAAcwI,gBAH/B,CAKUjC,SALV,CAKsB/F,IAAI,CAAC+F,SAL3B,CAMUkC,QANV,CAMqBjI,IAAI,CAACN,MAN1B,mCAQW,CACLqG,SAAS,CAATA,SADK,CAELkC,QAAQ,CAARA,QAFK,CARX,uEAaU,IAAIpI,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAbV,0EAxgByB,6DAyhBVoI,CAAAA,qBAzhBU,kLAyhBzB,mBAAqCvC,IAArC,CAA2CC,KAA3C,sMAE2BnI,CAAAA,KAAK,CAAC4B,GAAN,CAAUjB,IAAI,8CAAyCuH,IAAzC,wBAA4DC,KAA5D,CAAd,CAF3B,QAEUtG,QAFV,iBAGUU,IAHV,CAGiBV,QAAQ,CAACE,IAAT,CAAc2I,4BAH/B,CAKUpC,SALV,CAKsB/F,IAAI,CAAC+F,SAL3B,CAMU1D,KANV,CAMkBrC,IAAI,CAACN,MANvB,mCAQW,CACLqG,SAAS,CAATA,SADK,CAEL1D,KAAK,CAALA,KAFK,CARX,uEAaU,IAAIxC,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CAbV,0EAzhByB,gEA0iBVsI,CAAAA,eA1iBU,gKA0iBzB,mBAA+BzC,IAA/B,CAAqCC,KAArC,yLAE2BnI,CAAAA,KAAK,CAAC4B,GAAN,CAAUjB,IAAI,+BAA0BuH,IAA1B,wBAA6CC,KAA7C,CAAd,CAF3B,QAEUtG,QAFV,iBAGU+I,OAHV,CAGoB/I,QAAQ,CAACE,IAAT,CAAc8I,aAHlC,mCAKW,CACLD,OAAO,CAAPA,OADK,CALX,qEASU,IAAIxI,CAAAA,KAAJ,CAAU,cAAMC,OAAhB,CATV,yEA1iByB,kDAujBzB,MAAO,CACLX,cAAc,CAAdA,cADK,CAELY,qBAAqB,CAArBA,qBAFK,CAGLI,cAAc,CAAdA,cAHK,CAILG,UAAU,CAAVA,UAJK,CAKLa,gBAAgB,CAAhBA,gBALK,CAMLO,mBAAmB,CAAnBA,mBANK,CAOLS,WAAW,CAAXA,WAPK,CAQLe,gBAAgB,CAAhBA,gBARK,CASLwC,eAAe,CAAfA,eATK,CAULU,aAAa,CAAbA,aAVK,CAWLQ,aAAa,CAAbA,aAXK,CAYLO,uBAAuB,CAAvBA,uBAZK,CAaLH,gBAAgB,CAAhBA,gBAbK,CAcLO,gBAAgB,CAAhBA,gBAdK,CAeLM,gBAAgB,CAAhBA,gBAfK,CAgBLE,kBAAkB,CAAlBA,kBAhBK,CAiBLG,qBAAqB,CAArBA,qBAjBK,CAkBLE,eAAe,CAAfA,eAlBK,CAAP,CAoBD,CAED,cAAejK,CAAAA,eAAf","sourcesContent":["import { axios } from \"./api\";\r\nimport { format, sub } from \"date-fns\";\r\nimport ptBR from \"date-fns/locale/pt-BR\";\r\nimport useUtilities from \"./useUtilities\";\r\n\r\nfunction calcPercent(small, larger) {\r\n  if (small > 0 && larger > 0) {\r\n    return Math.round(((small / larger) * 100));\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nfunction useSupplyChange() {\r\n  const path = \"/supply_change\";\r\n  const pathWeeklyGoals = \"/weekly_goal\";\r\n  const pathServiceTime = \"/service_time_analysis\";\r\n  const pathInvoice = \"/purchase_order_with_and_without_invoice\";\r\n  const pathPurchaseOrder = \"/authorized_purchase_order\";\r\n  const pathPurchaseRequests = \"/open_and_completed_purchase_requests\";\r\n  const pathTopItems = \"/top_10_requested_items\";\r\n  const pathPurchaseItems = \"/foloow_up_weekly\";\r\n  const pathListingItems = \"/stock_listing_items_abc_curve\";\r\n  const pathStockItems = \"/stock_items_curve_abc\";\r\n  const pathTotalStock = \"/total_stock\";\r\n  const pathValidity = \"/validity_control_listing\";\r\n  const pathTotalValidity = \"/total_stock_by_validity_control\";\r\n  const pathValidityItems = \"/quantity_items_validity_control_abc\";\r\n  const { toBRL } = useUtilities();\r\n\r\n  async function getWeeklyGoals(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathWeeklyGoals + `?pattern=${pattern}`\r\n      );\r\n      const weeklyGoals = response.data.weekly_goal.result;\r\n      const { total_month, locked_month } = response.data.weekly_goal;\r\n      return { weeklyGoals, total_month, locked_month };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getSolicitationsMonth(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + `/total_opens_solic?pattern=${pattern}`\r\n      );\r\n      const json = response.data;\r\n      const solicitations = json.total_opens_solic[0];\r\n\r\n      return { solicitations };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getServiceTime(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathServiceTime + `?pattern=${pattern}`\r\n      );\r\n      const serviceTime = response.data.service_time_analysis;\r\n      return { serviceTime };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getInvoice(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathInvoice + `?pattern=${pattern}`\r\n      );\r\n      const json = response.data.purchase_order_with_and_without_invoice;\r\n      const result = json.reduce(\r\n        (acc, { TIPO, QTD_ORDEM_COMPRAS, VALOR_TOTAL }) => {\r\n          if (TIPO === \"ATENDIDO\") {\r\n            acc.quantityInvoice = QTD_ORDEM_COMPRAS;\r\n            acc.totalInvoice = Math.round(VALOR_TOTAL);\r\n          } else if (TIPO === \"PREVISTO\") {\r\n            acc.quantityNoInvoice = QTD_ORDEM_COMPRAS;\r\n            acc.totalNoInvoice = Math.round(VALOR_TOTAL);\r\n          }\r\n\r\n          acc.totalQuantity += QTD_ORDEM_COMPRAS;\r\n          acc.totalValue += Math.round(VALOR_TOTAL);\r\n\r\n          return acc;\r\n        },\r\n        {\r\n          quantityInvoice: 0,\r\n          totalInvoice: 0,\r\n          quantityNoInvoice: 0,\r\n          totalNoInvoice: 0,\r\n          totalQuantity: 0,\r\n          totalValue: 0,\r\n        }\r\n      );\r\n      return {\r\n        result,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getPurchaseOrder(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathPurchaseOrder + `?pattern=${pattern}`\r\n      );\r\n      const json = response.data.authorized_purchase_order;\r\n      const result = json.reduce((acc, { SITUACAO, QTD_ORDEM_COMPRAS, VALOR_TOTAL }) => {\r\n        if (SITUACAO === \"AUTORIZADA\") {\r\n          acc.quantityAuthorized = QTD_ORDEM_COMPRAS;\r\n          acc.totalAuthorized = Math.round(VALOR_TOTAL);\r\n        } else if (SITUACAO === \"PENDENTE AUTORIZACAO\") {\r\n          acc.quantityNoAuthorized = QTD_ORDEM_COMPRAS;\r\n          acc.totalNoAuthorized = Math.round(VALOR_TOTAL);\r\n        }\r\n\r\n        acc.totalQuantity += QTD_ORDEM_COMPRAS;\r\n        acc.totalValue += Math.round(VALOR_TOTAL);\r\n\r\n        return acc;\r\n      },\r\n        {\r\n          quantityAuthorized: 0,\r\n          totalAuthorized: 0,\r\n          quantityNoAuthorized: 0,\r\n          totalNoAuthorized: 0,\r\n          totalQuantity: 0,\r\n          totalValue: 0,\r\n        }\r\n      );\r\n\r\n      return {\r\n        result,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getPurchaseRequests(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathPurchaseRequests + `?pattern=${pattern}`\r\n      );\r\n      const json = response.data.open_and_completed_purchase_requests;\r\n      const result = json.reduce(\r\n        (acc, { TIPO, QT_SOLIC, VL_TOTAL }) => {\r\n          if (TIPO === \"ABERTO\") {\r\n            acc.quantityOpen = QT_SOLIC;\r\n            acc.totalOpen = Math.round(VL_TOTAL);\r\n          } else if (TIPO === \"FECHADO\") {\r\n            acc.quantityDone = QT_SOLIC;\r\n            acc.totalDone = Math.round(VL_TOTAL);\r\n          }\r\n\r\n          acc.quantityRequests += QT_SOLIC;\r\n          acc.totalValue += Math.round(VL_TOTAL);\r\n\r\n          return acc;\r\n        },\r\n        {\r\n          quantityOpen: 0,\r\n          totalOpen: 0,\r\n          quantityDone: 0,\r\n          totalDone: 0,\r\n          quantityRequests: 0,\r\n          totalValue: 0,\r\n        }\r\n      );\r\n      return {\r\n        result,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getTopItems(pattern) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathTopItems + `?pattern=${pattern}`\r\n      );\r\n      const json = response.data.top_10_requested_items;\r\n      const items = json.map(\r\n        ({ RANK, CD_PRODUTO, DS_PRODUTO, TOTAL_DE_SOLICITACOES }) => ({\r\n          cdProduct: CD_PRODUTO,\r\n          rank: RANK.replace(\"o\", \"\"),\r\n          describe: DS_PRODUTO,\r\n          itemsRequested: TOTAL_DE_SOLICITACOES,\r\n        })\r\n      );\r\n      const [firstRank, ...outerRanks] = items;\r\n      return { firstRank, outerRanks };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getPurchaseItems() {\r\n    try {\r\n      const response = await axios.get(path + pathPurchaseItems);\r\n      const { delivered, pending, total } = response.data.foloow_up_weekly;\r\n\r\n      const unicSectors = Array.from(new Set(total.map(({ DS_ESPECIE }) => DS_ESPECIE)));\r\n\r\n      const percents = [];\r\n      unicSectors.forEach((sector) => {\r\n        let pending = 0;\r\n        let delivered = 0;\r\n\r\n        total.forEach((totalSector) => {\r\n          if (sector === totalSector.DS_ESPECIE) {\r\n            if (totalSector.TIPO === \"PEND\") {\r\n              pending += totalSector.TOTAL_POR_ESPECIE;\r\n            } else if (totalSector.TIPO === \"ENTREGUE\") {\r\n              delivered += totalSector.TOTAL_POR_ESPECIE;\r\n            }\r\n          }\r\n        });\r\n\r\n        percents.push({\r\n          sector,\r\n          percent: calcPercent(delivered, delivered + pending)\r\n        });\r\n      });\r\n\r\n      const days = [];\r\n\r\n      for (let i = 7; i >= 1; i--) {\r\n        const day = format(sub(new Date(), {\r\n          years: 0,\r\n          months: 0,\r\n          weeks: 0,\r\n          days: i,\r\n          hours: 0,\r\n          minutes: 0,\r\n          seconds: 0\r\n        }), \"EEEE\", { locale: ptBR });\r\n\r\n        if (day === \"segunda-feira\") {\r\n          days.push({\r\n            title: \"SEG\",\r\n            day: \"segunda\"\r\n          });\r\n        } else if (day === \"terça-feira\") {\r\n          days.push({\r\n            title: \"TER\",\r\n            day: \"terça\"\r\n          });\r\n        } else if (day === \"quarta-feira\") {\r\n          days.push({\r\n            title: \"QUA\",\r\n            day: \"quarta\"\r\n          });\r\n        } else if (day === \"quinta-feira\") {\r\n          days.push({\r\n            title: \"QUI\",\r\n            day: \"quinta\"\r\n          });\r\n        } else if (day === \"sexta-feira\") {\r\n          days.push({\r\n            title: \"SEX\",\r\n            day: \"sexta\"\r\n          });\r\n        } else if (day === \"sábado\") {\r\n          days.push({\r\n            title: \"SAB\",\r\n            day: \"sábado\"\r\n          });\r\n        } else if (day === \"domingo\") {\r\n          days.push({\r\n            title: \"DOM\",\r\n            day: \"domingo\"\r\n          });\r\n        }\r\n      }\r\n\r\n      const situations = percents.map(({ sector, percent }) => ({\r\n        name: sector,\r\n        percent,\r\n        total: 0,\r\n        weeklys: days.map(({ day, title }) => ({\r\n          day,\r\n          title,\r\n          delivered: 0,\r\n          pending: 0,\r\n        }))\r\n      }));\r\n\r\n      pending.forEach((pending) => {\r\n        situations.forEach((situation) => {\r\n          if (situation.name === pending.DS_ESPECIE) {\r\n            situation.weeklys.forEach((value, i) => {\r\n              if (value.title === pending.DIA_SEMANA) {\r\n                situation.weeklys[i].pending += pending.QTD_DO_DIA;\r\n                situation.total += pending.QTD_DO_DIA;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n\r\n      delivered.forEach((delivered) => {\r\n        situations.forEach((situation) => {\r\n          if (situation.name === delivered.DS_ESPECIE) {\r\n            situation.weeklys.forEach((value, i) => {\r\n              if (value.title === delivered.DIA_SEMANA) {\r\n                situation.weeklys[i].delivered += delivered.QTD;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n\r\n      situations.forEach((situation, i) => {\r\n        situation.weeklys.forEach((weekly, index) => {\r\n          situations[i].weeklys[index].pending = weekly.pending + (situations[i].weeklys[index - 1]?.pending || 0);\r\n        });\r\n      });\r\n\r\n      return { fallowUpWeekly: situations };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getListingItems(pattern, page, limit, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathListingItems + `?pattern=${pattern}&page=${page}&limitItens=${limit}&stock=${stock}`\r\n      );\r\n      const { totalPage, result } = response.data.stock_listing_items_abc_curve;\r\n\r\n      const inventoryItems = result.map(({ DS_PRODUTO, CD_PRODUTO, QT_ESTOQUE_ATUAL }) => {\r\n        const description = DS_PRODUTO.split(\" \");\r\n        return {\r\n          CD_PRODUTO,\r\n          DS_PRODUTO: description[0] + \" \" + (description[1] || \"\") + \" \" + (description[2] || \"\"),\r\n          QT_ESTOQUE_ATUAL\r\n        }\r\n      });\r\n\r\n      return { totalPage, inventoryItems };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getStockItems(pattern, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathStockItems + `?pattern=${pattern}&stock=${stock}`\r\n      );\r\n      const json = response.data.stock_items_curve_abc;\r\n\r\n      const items = [\r\n        { situation: \"1- CRITICO\", name: \"Crítico\", A: 0, B: 0, C: 0 },\r\n        { situation: \"2- ATENCAO\", name: \"Atenção\", A: 0, B: 0, C: 0 },\r\n        { situation: \"3- ABASTECIDO\", name: \"Abastecido\", A: 0, B: 0, C: 0 },\r\n        { situation: \"4- EXCESSO\", name: \"Excesso\", A: 0, B: 0, C: 0 },\r\n      ];\r\n\r\n      json.forEach(({ SITUACAO, TP_CLASSIFICACAO_ABC, TOTAL }) => {\r\n        items.forEach((item) => {\r\n          if (SITUACAO === item.situation) {\r\n            if (TP_CLASSIFICACAO_ABC === \"A\") {\r\n              item.A += TOTAL;\r\n            } else if (TP_CLASSIFICACAO_ABC === \"B\") {\r\n              item.B += TOTAL;\r\n            } else if (TP_CLASSIFICACAO_ABC === \"C\") {\r\n              item.C += TOTAL;\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      return { items };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getTotalStock(pattern, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathTotalStock + `?pattern=${pattern}&stock=${stock}`\r\n      );\r\n      const json = response.data.total_stock;\r\n      const value = json?.VALOR_ESTOQUE || 0;\r\n      const stockValue = toBRL(value);\r\n\r\n      return { stockValue };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getTotalValidity(pattern, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathTotalValidity + `?pattern=${pattern}&stock=${stock}`\r\n      );\r\n      const json = response.data.total_stock_by_validity_control;\r\n      const value = json?.VALOR_ESTOQUE || 0;\r\n      const validityValue = toBRL(value);\r\n\r\n      return { validityValue };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getValidityListingItems(pattern, page, limit, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathValidity + `?pattern=${pattern}&page=${page}&limitItens=${limit}&stock=${stock}`\r\n      );\r\n      const { totalPage, result } = response.data.validity_control_listing;\r\n\r\n      const validityItems = result.map(({ DS_PRODUTO, CD_PRODUTO, QTD_LOTE }) => {\r\n        const description = DS_PRODUTO.split(\" \");\r\n        return {\r\n          CD_PRODUTO,\r\n          DS_PRODUTO: description[0] + \" \" + (description[1] || \"\") + \" \" + (description[2] || \"\"),\r\n          QTD_LOTE\r\n        }\r\n      });\r\n\r\n      return { totalPage, validityItems };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getValidityItems(pattern, stock) {\r\n    try {\r\n      const response = await axios.get(\r\n        path + pathValidityItems + `?pattern=${pattern}&stock=${stock}`\r\n      );\r\n      const json = response.data.quantity_items_validity_control_abc;\r\n\r\n      const items = [\r\n        {\r\n          situation: \"1- CRITICO\",\r\n          name: \"Crítico\",\r\n          A: { red: 0, yellow: 0, green: 0 },\r\n          B: { red: 0, yellow: 0, green: 0 },\r\n          C: { red: 0, yellow: 0, green: 0 }\r\n        },\r\n        {\r\n          situation: \"2- ATENCAO\",\r\n          name: \"Atenção\",\r\n          A: { red: 0, yellow: 0, green: 0 },\r\n          B: { red: 0, yellow: 0, green: 0 },\r\n          C: { red: 0, yellow: 0, green: 0 }\r\n        },\r\n        {\r\n          situation: \"3- ABASTECIDO\",\r\n          name: \"Abastecido\",\r\n          A: { red: 0, yellow: 0, green: 0 },\r\n          B: { red: 0, yellow: 0, green: 0 },\r\n          C: { red: 0, yellow: 0, green: 0 }\r\n        },\r\n        {\r\n          situation: \"4- EXCESSO\",\r\n          name: \"Excesso\",\r\n          A: { red: 0, yellow: 0, green: 0 },\r\n          B: { red: 0, yellow: 0, green: 0 },\r\n          C: { red: 0, yellow: 0, green: 0 }\r\n        },\r\n      ];\r\n\r\n      json.forEach(({ SITUACAO, TP_CLASSIFICACAO_ABC, TOTAL, COR }) => {\r\n        items.forEach((item) => {\r\n          if (SITUACAO === item.situation) {\r\n            if (TP_CLASSIFICACAO_ABC === \"A\") {\r\n              if (COR.split(\" \")[1] === \"VERMELHO\") {\r\n                item.A.red += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"AMARELO\") {\r\n                item.A.yellow += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"VERDE\") {\r\n                item.A.green += TOTAL;\r\n              }\r\n            } else if (TP_CLASSIFICACAO_ABC === \"B\") {\r\n              if (COR.split(\" \")[1] === \"VERMELHO\") {\r\n                item.B.red += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"AMARELO\") {\r\n                item.B.yellow += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"VERDE\") {\r\n                item.B.green += TOTAL;\r\n              }\r\n            } else if (TP_CLASSIFICACAO_ABC === \"C\") {\r\n              if (COR.split(\" \")[1] === \"VERMELHO\") {\r\n                item.C.red += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"AMARELO\") {\r\n                item.C.yellow += TOTAL;\r\n              } else if (COR.split(\" \")[1] === \"VERDE\") {\r\n                item.C.green += TOTAL;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      return { items };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getStockFiveDays(page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `/stock_days_5d?page=${page}&limitItens=${limit}`);\r\n      const json = response.data.stock_days_5d;\r\n\r\n      const totalPage = json.totalPage;\r\n      const days = json.result;\r\n\r\n      return {\r\n        totalPage,\r\n        days\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getPendingRequests(page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `/pending_requests?page=${page}&limitItens=${limit}`);\r\n      const json = response.data.pending_requests;\r\n\r\n      const totalPage = json.totalPage;\r\n      const requests = json.result;\r\n\r\n      return {\r\n        totalPage,\r\n        requests\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getItemsWithVariation(page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `/items_with_greater_variation?page=${page}&limitItens=${limit}`);\r\n      const json = response.data.items_with_greater_variation;\r\n\r\n      const totalPage = json.totalPage;\r\n      const items = json.result;\r\n\r\n      return {\r\n        totalPage,\r\n        items\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  async function getStockFilters(page, limit) {\r\n    try {\r\n      const response = await axios.get(path + `/stock_filters?page=${page}&limitItens=${limit}`);\r\n      const filters = response.data.stock_filters;\r\n\r\n      return {\r\n        filters\r\n      };\r\n    } catch (error) {\r\n      throw new Error(error.message);\r\n    }\r\n  }\r\n\r\n  return {\r\n    getWeeklyGoals,\r\n    getSolicitationsMonth,\r\n    getServiceTime,\r\n    getInvoice,\r\n    getPurchaseOrder,\r\n    getPurchaseRequests,\r\n    getTopItems,\r\n    getPurchaseItems,\r\n    getListingItems,\r\n    getStockItems,\r\n    getTotalStock,\r\n    getValidityListingItems,\r\n    getTotalValidity,\r\n    getValidityItems,\r\n    getStockFiveDays,\r\n    getPendingRequests,\r\n    getItemsWithVariation,\r\n    getStockFilters,\r\n  };\r\n}\r\n\r\nexport default useSupplyChange;\r\n"]},"metadata":{},"sourceType":"module"}